"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var clockApp=document.querySelector("#clock-app"),quoteGenerator=document.querySelector("#quote-generator"),quoteText=quoteGenerator.querySelector("#quote"),quoteAuthor=quoteGenerator.querySelector("#quote-author"),refreshQuoteBtn=quoteGenerator.querySelector("button[data-action=quote-refresh]"),timeIcon=document.querySelector("#time-of-day-icon"),greetingSpan=document.querySelector("#greeting"),currentTimeSpan=document.querySelector("#current-time"),timezoneSpan=document.querySelector("#timezone"),locationSpan=document.querySelector("#location"),toggleTimeDetailsBtn=document.querySelector("button[data-action=toggle-details]"),timeDetailsContainer=document.querySelector("#time-details"),detailsTimezone=timeDetailsContainer.querySelector("[data-details=timezone]"),detailsDayOfTheYear=timeDetailsContainer.querySelector("[data-details=day-of-year]"),detailsDayOfTheWeek=timeDetailsContainer.querySelector("[data-details=day-of-week]"),detailsWeekNumber=timeDetailsContainer.querySelector("[data-details=week-number]"),QUOTE_API_BASE="https://programming-quotes-api.herokuapp.com/Quotes",IP_API_KEY="iMC9RpefbvVTgC7vDIdxLYH14hwAKs9pvi4SEypx",IP_API_BASE="https://api.ipbase.com/v2",REQUEST_LIMIT_HIT_CODE=429,WORLD_TIME_API_BASE="https://worldtimeapi.org/api/ip",ICON_SUN="./dist/assets/desktop/icon-sun.svg",ICON_MOON="./dist/assets/desktop/icon-moon.svg",getRandomQuote=function(){var e="".concat(QUOTE_API_BASE,"/random");fetch(e).then(function(e){return e.json()}).then(function(e){return insertQuote({quote:e.en,author:e.author})})},insertQuote=function(e){var t=e.quote,e=e.author;quoteText.innerText='"'.concat(t,'"'),quoteAuthor.innerText=e},getIPInfo=function(){var e="".concat(IP_API_BASE,"/info?apikey=").concat(IP_API_KEY);fetch(e).then(function(e){if(e.status===REQUEST_LIMIT_HIT_CODE)throw new Error("Requests limit hit");return e.json()}).then(function(e){var e=e.data,t=e.ip,e=e.location;handleIPData({ip:t,country:e.country.alpha2,city:e.city.name})}).catch(function(e){})},handleIPData=function(e){var t=e.ip,n=e.country,e=e.city;insertLocation({country:n,city:e}),getTimeByIP(t)},insertLocation=function(e){var t=e.country,e=e.city;locationSpan.innerText="".concat(e,", ").concat(t)},getTimeByIP=function(e){e="".concat(WORLD_TIME_API_BASE,"/").concat(e);fetch(e).then(function(e){return e.json()}).then(function(e){handleTimeData(_objectSpread(_objectSpread({},e),{},{dayOfWeek:e.day_of_week,dayOfYear:e.day_of_year,weekNumber:e.week_number}))})},handleTimeData=function(e){var t=e.abbreviation,n=e.datetime,o=e.dayOfWeek,a=e.dayOfYear,r=e.weekNumber,e=e.timezone,n=new Date(n),n=[n.getHours(),n.getMinutes()],i=n[0],n=n[1];insertGreeting(i),handleIcon(i),handleBackgroundImage(i),currentTimeSpan.innerText="".concat(i,":").concat(formatMinutes(n)),timezoneSpan.innerText=t,detailsTimezone.innerText=e,detailsDayOfTheYear.innerText=a,detailsDayOfTheWeek.innerText=o,detailsWeekNumber.innerText=r},formatMinutes=function(e){return"".concat(e<10?"0":"").concat(e)},insertGreeting=function(e){greetingSpan.innerText=5<=e&&e<12?"morning":12<=e&&e<18?"afternoon":"evening"},handleIcon=function(e){e=isDay(e)?ICON_SUN:ICON_MOON;timeIcon.src=e},handleBackgroundImage=function(e){var t=isDay()?"daytime":"nighttime";document.body.dataset.time=t},isDay=function(e){return 5<=e&&e<18},handleDetailsToggle=function(){toggleTimeDetailsBtn.toggleAttribute("data-expanded");var e=toggleTimeDetailsBtn.hasAttribute("data-expanded");quoteGenerator.toggleAttribute("data-hidden",e),toggleTimeDetailsBtn.setAttribute("aria-expanded",e),timeDetailsContainer.toggleAttribute("data-visible",e),timeDetailsContainer.classList.add("animation-scale-up"),clockApp.dataset.mode=e?"details":"display"};refreshQuoteBtn.addEventListener("click",getRandomQuote),toggleTimeDetailsBtn.addEventListener("click",handleDetailsToggle),getRandomQuote(),getIPInfo();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2xvY2tBcHAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdW90ZUdlbmVyYXRvciIsInF1b3RlVGV4dCIsInF1b3RlQXV0aG9yIiwicmVmcmVzaFF1b3RlQnRuIiwidGltZUljb24iLCJjdXJyZW50VGltZVNwYW4iLCJ0aW1lem9uZVNwYW4iLCJkZXRhaWxzVGltZXpvbmUiLCJ0aW1lRGV0YWlsc0NvbnRhaW5lciIsImRldGFpbHNEYXlPZlRoZVllYXIiLCJncmVldGluZ1NwYW4iLCJsb2NhdGlvblNwYW4iLCJJUF9BUElfQkFTRSIsIlJFUVVFU1RfTElNSVRfSElUX0NPREUiLCJ0b2dnbGVUaW1lRGV0YWlsc0J0biIsIlFVT1RFX0FQSV9CQVNFIiwiSVBfQVBJX0tFWSIsImNvbmNhdCIsImZldGNoIiwidGhlbiIsIldPUkxEX1RJTUVfQVBJX0JBU0UiLCJxdW90ZSIsImRhdGEiLCJlbiIsImF1dGhvciIsImluc2VydFF1b3RlIiwiX3JlZiIsImlubmVyVGV4dCIsImdldFJhbmRvbVF1b3RlIiwicmVxdWVzdFVSSSIsInJlcyIsInN0YXR1cyIsIkVycm9yIiwianNvbiIsIl9kYXRhJGRhdGEiLCJsb2NhdGlvbiIsImhhbmRsZUlQRGF0YSIsImlwIiwiY291bnRyeSIsImFscGhhMiIsImNpdHkiLCJuYW1lIiwiX3JlZjIiLCJpbnNlcnRMb2NhdGlvbiIsImdldElQSW5mbyIsImdldFRpbWVCeUlQIiwiX3JlZjMiLCJoYW5kbGVUaW1lRGF0YSIsIl9vYmplY3RTcHJlYWQiLCJkYXlPZldlZWsiLCJkYXlfb2Zfd2VlayIsImRheV9vZl95ZWFyIiwid2Vla051bWJlciIsIndlZWtfbnVtYmVyIiwiX3JlZjQiLCJhYmJyZXZpYXRpb24iLCJkYXRldGltZSIsImRheU9mWWVhciIsInRpbWV6b25lIiwiRGF0ZSIsIl9yZWY1IiwiZGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwibWludXRlcyIsImluc2VydEdyZWV0aW5nIiwiaGFuZGxlSWNvbiIsImhhbmRsZUJhY2tncm91bmRJbWFnZSIsImRldGFpbHNEYXlPZlRoZVdlZWsiLCJkZXRhaWxzV2Vla051bWJlciIsImljb25Tb3VyY2UiLCJpc0RheSIsIklDT05fU1VOIiwiSUNPTl9NT09OIiwic3JjIiwiZGF0YXNldCIsInRpbWUiLCJpc0V4cGFuZGVkIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZURldGFpbHNUb2dnbGUiXSwibWFwcGluZ3MiOiJxdkJBQUEsSUFBTUEsU0FBV0MsU0FBU0MsY0FBYyxZQUF2QixFQUVYQyxlQUFpQkYsU0FBU0MsY0FBYyxrQkFBdkIsRUFDakJFLFVBQVlELGVBQWVELGNBQWMsUUFBN0IsRUFDWkcsWUFBY0YsZUFBZUQsY0FBYyxlQUE3QixFQUNkSSxnQkFBa0JILGVBQWVELGNBQWMsbUNBQTdCLEVBRWxCSyxTQUFXTixTQUFTQyxjQUFjLG1CQUF2QixFQVBYRixhQUFXQyxTQUFTQyxjQUFjLFdBQXZCRCxFQUNqQk8sZ0JBQUFQLFNBQUFDLGNBQUEsZUFBQSxFQVNNTyxhQUFlUixTQUFTQyxjQUFjLFdBQXZCLEVBUmZDLGFBQWlCRixTQUFTQyxjQUFjLFdBQXZCRCxFQUVqQkkscUJBQWNGLFNBQWVELGNBQWMsb0NBQTdCQyxFQUNkRyxxQkFBa0JILFNBQWVELGNBQWMsZUFBN0JDLEVBQ3hCTyxnQkFBQUMscUJBQUFULGNBQUEseUJBQUEsRUFVTVUsb0JBQXNCRCxxQkFBcUJULGNBQWMsNEJBQW5DLEVBVHRCSyxvQkFBb0JMLHFCQUFjQSxjQUF4Qyw0QkFBMEJBLEVBQ3BCVyxrQkFBZVoscUJBQXVCQyxjQUE1Qyw0QkFBcUJELEVBRWZRLGVBQWVSLHNEQUNmYSxXQUFlYiwyQ0FDckJjLFlBQUEsNEJBV01DLHVCQUF5QixJQVZ6QkMsb0JBQXVCaEIsa0NBRXZCUyxTQUFBQSxxQ0FDQUUsVUFBQUEsc0NBSUFNLGVBQWlCLFdBQ3ZCLElBQU1DLEVBQWEsR0FBQUMsT0FBQUYsZUFBQSxTQUFBLEVBQ25CRyxN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QWMsU0FBQW9CLEdBOEJuQixNQUFBLEdBQUFoRCxPQTdCTVksRUFBVSxHQUFBLElBQU1ULEVBNkJ0QixFQUFBSCxPQTdCc0JHLENBNkJ0QixDQUNBLEVBMUJFMkIsZUFBYyxTQUFBaUIsR0ErQmhCdEQsYUE1QkcrQyxVQURnQlAsR0FBTDVCLEdBRkUwQyxFQUFBLEdBQUEsVUFBQSxJQUFBQSxHQUFBQSxFQUFBLEdBQUEsWUFBQSxTQWdDaEIsRUFyQ0RHLFdBQUEsU0FBQUgsR0FjQU8sRUFBQUMsTUFBQVIsQ0FBQSxFQUFBUyxTQUFBQyxVQTRCQ3RFLFNBQVN1RSxJQUFNSixDQUNmLEVBNUJ1Q2Ysc0JBQUFBLFNBQTJEUSxHQWdDbEcsSUFoQ2lEZixFQUFBQSxNQUFpRCxFQUFqREEsVUFBaUQsWUFpQ2xHbkQsU0FqQzREMkQsS0FBc0NtQixRQUFBQyxLQUF0Q3BCLENBa0M1RCxFQWpDTUksTUFBTyxTQUFBRyxHQW9DYixPQW5DMEJILEdBQTFCRyxHQUErQkYsRUFBTixFQW9DekIsRUFsQ0FLLG9CQUFBLFdBc0NBckQscUJBckNBc0QsZ0JBQUEsZUFxQ0EsRUFDQSxJQXJDQS9ELEVBQWdCc0IscUJBQWVxQyxhQUEvQixlQUFnQnJDLEVBc0NoQjNCLGVBckNhMkIsZ0JBQVk0QixjQUF6QnVCLENBcUNBLEVBQ0FoRSxxQkFyQ2dCYSxhQUFZK0IsZ0JBQTVCb0IsQ0FxQ0EsRUFDQXRFLHFCQXJDb0JtQixnQkFBWThCLGVBQWhDcUIsQ0FxQ0EsRUFDQXRFLHFCQXJDb0JtQixVQUFwQm9ELElBQWdDOUIsb0JBcUNoQyxFQUNBcEQsU0FyQ0F5RSxRQUFBQSxLQUFrQjNDLEVBQVl5QixVQUE5QixTQVhELEVBb0RBakQsZ0JBckNDNkUsaUJBQVUsUUFBVnBELGNBcUNELEVBcENDZCxxQkFGRGtFLGlCQUFBLFFBQUFDLG1CQUVDLEVBd0NEckQsZUFBYyxFQXJDZGdCLFVBQU1zQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNsb2NrQXBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb2NrLWFwcCcpO1xyXG4vKiBlbGVtZW50cyBmb3IgcXVvdGUgaGFuZGxpbmcgKi9cclxuY29uc3QgcXVvdGVHZW5lcmF0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdGUtZ2VuZXJhdG9yJyk7XHJcbmNvbnN0IHF1b3RlVGV4dCA9IHF1b3RlR2VuZXJhdG9yLnF1ZXJ5U2VsZWN0b3IoJyNxdW90ZScpO1xyXG5jb25zdCBxdW90ZUF1dGhvciA9IHF1b3RlR2VuZXJhdG9yLnF1ZXJ5U2VsZWN0b3IoJyNxdW90ZS1hdXRob3InKTtcclxuY29uc3QgcmVmcmVzaFF1b3RlQnRuID0gcXVvdGVHZW5lcmF0b3IucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtYWN0aW9uPXF1b3RlLXJlZnJlc2hdJyk7XHJcbi8qIGVsZW1lbnRzIGZvciB0aW1lIGFuZCBkZXRhaWxzIGhhbmRsaW5nICovXHJcbmNvbnN0IHRpbWVJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWUtb2YtZGF5LWljb24nKTtcclxuY29uc3QgZ3JlZXRpbmdTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyZWV0aW5nJyk7XHJcbmNvbnN0IGN1cnJlbnRUaW1lU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXJyZW50LXRpbWUnKTtcclxuY29uc3QgdGltZXpvbmVTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWV6b25lJyk7XHJcbmNvbnN0IGxvY2F0aW9uU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2NhdGlvbicpO1xyXG4vKiBkZXRhaWxzIGVsZW1lbnRzICovXHJcbmNvbnN0IHRvZ2dsZVRpbWVEZXRhaWxzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtYWN0aW9uPXRvZ2dsZS1kZXRhaWxzXScpO1xyXG5jb25zdCB0aW1lRGV0YWlsc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lLWRldGFpbHMnKTtcclxuY29uc3QgZGV0YWlsc1RpbWV6b25lID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz10aW1lem9uZV0nKTtcclxuY29uc3QgZGV0YWlsc0RheU9mVGhlWWVhciA9IHRpbWVEZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRldGFpbHM9ZGF5LW9mLXllYXJdJyk7XHJcbmNvbnN0IGRldGFpbHNEYXlPZlRoZVdlZWsgPSB0aW1lRGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXRhaWxzPWRheS1vZi13ZWVrXScpO1xyXG5jb25zdCBkZXRhaWxzV2Vla051bWJlciA9IHRpbWVEZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRldGFpbHM9d2Vlay1udW1iZXJdJyk7XHJcblxyXG5jb25zdCBRVU9URV9BUElfQkFTRSA9ICdodHRwczovL3Byb2dyYW1taW5nLXF1b3Rlcy1hcGkuaGVyb2t1YXBwLmNvbS9RdW90ZXMnO1xyXG5jb25zdCBJUF9BUElfS0VZID0gJ2lNQzlScGVmYnZWVGdDN3ZESWR4TFlIMTRod0FLczlwdmk0U0V5cHgnO1xyXG5jb25zdCBJUF9BUElfQkFTRSA9ICdodHRwczovL2FwaS5pcGJhc2UuY29tL3YyJztcclxuY29uc3QgUkVRVUVTVF9MSU1JVF9ISVRfQ09ERSA9IDQyOTtcclxuY29uc3QgV09STERfVElNRV9BUElfQkFTRSA9ICdodHRwczovL3dvcmxkdGltZWFwaS5vcmcvYXBpL2lwJztcclxuXHJcbmNvbnN0IElDT05fU1VOID0gJy4vZGlzdC9hc3NldHMvZGVza3RvcC9pY29uLXN1bi5zdmcnO1xyXG5jb25zdCBJQ09OX01PT04gPSAnLi9kaXN0L2Fzc2V0cy9kZXNrdG9wL2ljb24tbW9vbi5zdmcnO1xyXG5cclxuLyogcXVvdGUgaGFuZGxpbmcgKi9cclxuY29uc3QgZ2V0UmFuZG9tUXVvdGUgPSAoKSA9PiB7XHJcblx0Y29uc3QgcmVxdWVzdFVSSSA9IGAke1FVT1RFX0FQSV9CQVNFfS9yYW5kb21gO1xyXG5cdGZldGNoKHJlcXVlc3RVUkkpXHJcblx0XHQudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG5cdFx0LnRoZW4oKGRhdGEpID0+IGluc2VydFF1b3RlKHsgcXVvdGU6IGRhdGEuZW4sIGF1dGhvcjogZGF0YS5hdXRob3IgfSkpO1xyXG59O1xyXG5cclxuY29uc3QgaW5zZXJ0UXVvdGUgPSAoeyBxdW90ZSwgYXV0aG9yIH0pID0+IHtcclxuXHRxdW90ZVRleHQuaW5uZXJUZXh0ID0gYFwiJHtxdW90ZX1cImA7XHJcblx0cXVvdGVBdXRob3IuaW5uZXJUZXh0ID0gYXV0aG9yO1xyXG59O1xyXG5cclxuLyogaXAgaW5mbyBoYW5kbGluZyAqL1xyXG5jb25zdCBnZXRJUEluZm8gPSAoKSA9PiB7XHJcblx0Y29uc3QgcmVxdWVzdFVSSSA9IGAke0lQX0FQSV9CQVNFfS9pbmZvP2FwaWtleT0ke0lQX0FQSV9LRVl9YDtcclxuXHRmZXRjaChyZXF1ZXN0VVJJKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4ge1xyXG5cdFx0XHRpZiAocmVzLnN0YXR1cyA9PT0gUkVRVUVTVF9MSU1JVF9ISVRfQ09ERSkgdGhyb3cgbmV3IEVycm9yKCdSZXF1ZXN0cyBsaW1pdCBoaXQnKTtcclxuXHRcdFx0cmV0dXJuIHJlcy5qc29uKCk7XHJcblx0XHR9KVxyXG5cdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0Y29uc3QgeyBpcCwgbG9jYXRpb24gfSA9IGRhdGEuZGF0YTtcclxuXHRcdFx0aGFuZGxlSVBEYXRhKHsgaXA6IGlwLCBjb3VudHJ5OiBsb2NhdGlvbi5jb3VudHJ5LmFscGhhMiwgY2l0eTogbG9jYXRpb24uY2l0eS5uYW1lIH0pO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Ly8gZG8gbm90aGluZyBmb3Igbm93XHJcblx0XHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUlQRGF0YSA9ICh7IGlwLCBjb3VudHJ5LCBjaXR5IH0pID0+IHtcclxuXHRpbnNlcnRMb2NhdGlvbih7IGNvdW50cnksIGNpdHkgfSk7XHJcblx0Z2V0VGltZUJ5SVAoaXApO1xyXG59O1xyXG5cclxuLyogaW5zZXJ0IGxvY2F0aW9uIHVuZGVyIGRpc3BsYXlpbmcgdGltZSAqL1xyXG5jb25zdCBpbnNlcnRMb2NhdGlvbiA9ICh7IGNvdW50cnksIGNpdHkgfSkgPT4ge1xyXG5cdGxvY2F0aW9uU3Bhbi5pbm5lclRleHQgPSBgJHtjaXR5fSwgJHtjb3VudHJ5fWA7XHJcbn07XHJcblxyXG4vKiB0aW1lIGhhbmRsaW5nICovXHJcbmNvbnN0IGdldFRpbWVCeUlQID0gKGlwKSA9PiB7XHJcblx0Y29uc3QgcmVxdWVzdFVSSSA9IGAke1dPUkxEX1RJTUVfQVBJX0JBU0V9LyR7aXB9YDtcclxuXHRmZXRjaChyZXF1ZXN0VVJJKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuXHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdGhhbmRsZVRpbWVEYXRhKHtcclxuXHRcdFx0XHQuLi5kYXRhLFxyXG5cdFx0XHRcdGRheU9mV2VlazogZGF0YS5kYXlfb2Zfd2VlayxcclxuXHRcdFx0XHRkYXlPZlllYXI6IGRhdGEuZGF5X29mX3llYXIsXHJcblx0XHRcdFx0d2Vla051bWJlcjogZGF0YS53ZWVrX251bWJlcixcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxufTtcclxuXHJcbi8qIGluc2VydCBkYXRhIGZvciB0aW1lLCBsb2NhdGlvbiBhbmQgZGV0YWlscyAqL1xyXG5jb25zdCBoYW5kbGVUaW1lRGF0YSA9ICh7IGFiYnJldmlhdGlvbiwgZGF0ZXRpbWUsIGRheU9mV2VlaywgZGF5T2ZZZWFyLCB3ZWVrTnVtYmVyLCB0aW1lem9uZSB9KSA9PiB7XHJcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGV0aW1lKTtcclxuXHRjb25zdCBbaG91cnMsIG1pbnV0ZXNdID0gW2RhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCldO1xyXG5cdGluc2VydEdyZWV0aW5nKGhvdXJzKTtcclxuXHRoYW5kbGVJY29uKGhvdXJzKTtcclxuXHRoYW5kbGVCYWNrZ3JvdW5kSW1hZ2UoaG91cnMpO1xyXG5cdGN1cnJlbnRUaW1lU3Bhbi5pbm5lclRleHQgPSBgJHtob3Vyc306JHtmb3JtYXRNaW51dGVzKG1pbnV0ZXMpfWA7XHJcblx0dGltZXpvbmVTcGFuLmlubmVyVGV4dCA9IGFiYnJldmlhdGlvbjtcclxuXHRkZXRhaWxzVGltZXpvbmUuaW5uZXJUZXh0ID0gdGltZXpvbmU7XHJcblx0ZGV0YWlsc0RheU9mVGhlWWVhci5pbm5lclRleHQgPSBkYXlPZlllYXI7XHJcblx0ZGV0YWlsc0RheU9mVGhlV2Vlay5pbm5lclRleHQgPSBkYXlPZldlZWs7XHJcblx0ZGV0YWlsc1dlZWtOdW1iZXIuaW5uZXJUZXh0ID0gd2Vla051bWJlcjtcclxufTtcclxuXHJcbmNvbnN0IGZvcm1hdE1pbnV0ZXMgPSAobWludXRlcykgPT4ge1xyXG5cdHJldHVybiBgJHttaW51dGVzIDwgMTAgPyAnMCcgOiAnJ30ke21pbnV0ZXN9YDtcclxufTtcclxuXHJcbi8qIHNldCBncmVldGluZyBkZXBlbmRpbmcgb24gdGhlIHRpbWUgb2YgdGhlIGRheSAqL1xyXG5jb25zdCBpbnNlcnRHcmVldGluZyA9IChob3VycykgPT4ge1xyXG5cdGNvbnN0IHRpbWVPZkRheSA9IGhvdXJzID49IDUgJiYgaG91cnMgPCAxMiA/ICdtb3JuaW5nJyA6IGhvdXJzID49IDEyICYmIGhvdXJzIDwgMTggPyAnYWZ0ZXJub29uJyA6ICdldmVuaW5nJztcclxuXHRncmVldGluZ1NwYW4uaW5uZXJUZXh0ID0gdGltZU9mRGF5O1xyXG59O1xyXG5cclxuLyogc2V0IGljb24gZGVwZW5kaW5nIG9uIHRoZSB0aW1lIG9mIHRoZSBkYXkgKi9cclxuY29uc3QgaGFuZGxlSWNvbiA9IChob3VycykgPT4ge1xyXG5cdGNvbnN0IGljb25Tb3VyY2UgPSBpc0RheShob3VycykgPyBJQ09OX1NVTiA6IElDT05fTU9PTjtcclxuXHR0aW1lSWNvbi5zcmMgPSBpY29uU291cmNlO1xyXG59O1xyXG5cclxuLyogc2V0IGJhY2tncm91bmQgZGVwZW5kaW5nIG9uIHRoZSB0aW1lIG9mIHRoZSBkYXkgKi9cclxuY29uc3QgaGFuZGxlQmFja2dyb3VuZEltYWdlID0gKGhvdXJzKSA9PiB7XHJcblx0Y29uc3QgdGltZSA9IGlzRGF5KCkgPyAnZGF5dGltZScgOiAnbmlnaHR0aW1lJztcclxuXHRkb2N1bWVudC5ib2R5LmRhdGFzZXQudGltZSA9IHRpbWU7XHJcbn07XHJcblxyXG5jb25zdCBpc0RheSA9IChob3VycykgPT4ge1xyXG5cdHJldHVybiBob3VycyA+PSA1ICYmIGhvdXJzIDwgMTg7XHJcbn07XHJcblxyXG4vKiB0b2dnbGluZyBkZXRhaWxzIGhhbmRsZXIgKi9cclxuY29uc3QgaGFuZGxlRGV0YWlsc1RvZ2dsZSA9ICgpID0+IHtcclxuXHR0b2dnbGVUaW1lRGV0YWlsc0J0bi50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQnKTtcclxuXHRjb25zdCBpc0V4cGFuZGVkID0gdG9nZ2xlVGltZURldGFpbHNCdG4uaGFzQXR0cmlidXRlKCdkYXRhLWV4cGFuZGVkJyk7XHJcblx0cXVvdGVHZW5lcmF0b3IudG9nZ2xlQXR0cmlidXRlKCdkYXRhLWhpZGRlbicsIGlzRXhwYW5kZWQpO1xyXG5cdHRvZ2dsZVRpbWVEZXRhaWxzQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGlzRXhwYW5kZWQpO1xyXG5cdHRpbWVEZXRhaWxzQ29udGFpbmVyLnRvZ2dsZUF0dHJpYnV0ZSgnZGF0YS12aXNpYmxlJywgaXNFeHBhbmRlZCk7XHJcblx0dGltZURldGFpbHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uLXNjYWxlLXVwJyk7XHJcblx0Y2xvY2tBcHAuZGF0YXNldC5tb2RlID0gaXNFeHBhbmRlZCA/ICdkZXRhaWxzJyA6ICdkaXNwbGF5JztcclxufTtcclxuXHJcbi8qIGV2ZW50IGxpc3RlbmVycyAqL1xyXG5yZWZyZXNoUXVvdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRSYW5kb21RdW90ZSk7XHJcbnRvZ2dsZVRpbWVEZXRhaWxzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRGV0YWlsc1RvZ2dsZSk7XHJcblxyXG4vKiAgKi9cclxuZ2V0UmFuZG9tUXVvdGUoKTtcclxuZ2V0SVBJbmZvKCk7XHJcbiJdfQ==
