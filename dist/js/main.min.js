"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var clockApp=document.querySelector("#clock-app"),quoteGenerator=document.querySelector("#quote-generator"),quoteText=quoteGenerator.querySelector("#quote"),quoteAuthor=quoteGenerator.querySelector("#quote-author"),refreshQuoteBtn=quoteGenerator.querySelector("button[data-action=quote-refresh]"),timeInfoContainer=document.querySelector("#time-info"),timeIcon=document.querySelector("#time-of-day-icon"),greetingSpan=document.querySelector("#greeting"),currentTimeSpan=document.querySelector("#current-time"),timezoneSpan=document.querySelector("#timezone"),locationSpan=document.querySelector("#location"),toggleTimeDetailsBtn=document.querySelector("button[data-action=toggle-details]"),timeDetailsContainer=document.querySelector("#time-details"),detailsTimezone=timeDetailsContainer.querySelector("[data-details=timezone]"),detailsDayOfTheYear=timeDetailsContainer.querySelector("[data-details=day-of-year]"),detailsDayOfTheWeek=timeDetailsContainer.querySelector("[data-details=day-of-week]"),detailsWeekNumber=timeDetailsContainer.querySelector("[data-details=week-number]"),QUOTE_API_BASE="https://programming-quotes-api.herokuapp.com/Quotes",IP_API_KEY="iMC9RpefbvVTgC7vDIdxLYH14hwAKs9pvi4SEypx",IP_API_BASE="https://api.ipbase.com/v2",REQUEST_LIMIT_HIT_CODE=429,WORLD_TIME_API_BASE="https://worldtimeapi.org/api/ip",ICON_SUN="./dist/assets/desktop/icon-sun.svg",ICON_MOON="./dist/assets/desktop/icon-moon.svg",getRandomQuote=function(){var e="".concat(QUOTE_API_BASE,"/random");fetch(e).then(function(e){return e.json()}).then(function(e){return insertQuote({quote:e.en,author:e.author})})},insertQuote=function(e){var t=e.quote,e=e.author;quoteText.innerText='"'.concat(t,'"'),quoteAuthor.innerText=e},getIPInfo=function(){var e=localStorage.getItem("location");e?handleIPData(JSON.parse(e)):(e="".concat(IP_API_BASE,"/info?apikey=").concat(IP_API_KEY),fetch(e).then(function(e){if(e.status===REQUEST_LIMIT_HIT_CODE)throw new Error("Requests limit hit");return e.json()}).then(function(e){var e=e.data,t=e.ip,e=e.location,t={ip:t,country:e.country.alpha2,city:e.city.name};return handleIPData(t),t}).then(function(e){localStorage.setItem("location",JSON.stringify(e))}).catch(function(e){}))},handleIPData=function(e){var t=e.ip,n=e.country,e=e.city;insertLocation({country:n,city:e}),getTimeByIP(t)},insertLocation=function(e){var t=e.country,e=e.city;locationSpan.innerText="".concat(e,", ").concat(t)},getTimeByIP=function(e){e="".concat(WORLD_TIME_API_BASE,"/").concat(e);fetch(e).then(function(e){return e.json()}).then(function(e){handleTimeData(_objectSpread(_objectSpread({},e),{},{dayOfWeek:e.day_of_week,dayOfYear:e.day_of_year,weekNumber:e.week_number}))})},handleTimeData=function(e){var t=e.abbreviation,n=e.datetime,o=e.dayOfWeek,a=e.dayOfYear,r=e.weekNumber,e=e.timezone,n=new Date(n),n=[n.getHours(),n.getMinutes()],i=n[0],n=n[1];insertGreeting(i),handleIcon(i),handleBackgroundImage(i),currentTimeSpan.innerText="".concat(i,":").concat(formatMinutes(n)),timezoneSpan.innerText=t,detailsTimezone.innerText=e,detailsDayOfTheYear.innerText=a,detailsDayOfTheWeek.innerText=o,detailsWeekNumber.innerText=r},formatMinutes=function(e){return"".concat(e<10?"0":"").concat(e)},insertGreeting=function(e){greetingSpan.innerText=5<=e&&e<12?"morning":12<=e&&e<18?"afternoon":"evening"},handleIcon=function(e){e=isDay(e)?ICON_SUN:ICON_MOON;timeIcon.src=e},handleBackgroundImage=function(e){e=isDay(e)?"daytime":"nighttime";document.body.dataset.time=e},isDay=function(e){return 5<=e&&e<18},handleDetailsToggle=function(){toggleTimeDetailsBtn.toggleAttribute("data-expanded");var e=toggleTimeDetailsBtn.hasAttribute("data-expanded");quoteGenerator.toggleAttribute("data-hidden",e),toggleTimeDetailsBtn.setAttribute("aria-expanded",e),clockApp.dataset.mode=e?"details":"display",timeDetailsContainer.toggleAttribute("data-visible",e),timeDetailsContainer.classList.toggle("move-up",e),timeInfoContainer.classList.toggle("move-up",e),timeInfoContainer.classList.toggle("move-down",!e)};refreshQuoteBtn.addEventListener("click",getRandomQuote),toggleTimeDetailsBtn.addEventListener("click",handleDetailsToggle),getRandomQuote(),getIPInfo();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2xvY2tBcHAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdW90ZUdlbmVyYXRvciIsInF1b3RlVGV4dCIsInF1b3RlQXV0aG9yIiwicmVmcmVzaFF1b3RlQnRuIiwidGltZUluZm9Db250YWluZXIiLCJncmVldGluZ1NwYW4iLCJjdXJyZW50VGltZVNwYW4iLCJ0aW1lRGV0YWlsc0NvbnRhaW5lciIsImRldGFpbHNUaW1lem9uZSIsInRpbWVJY29uIiwidGltZXpvbmVTcGFuIiwibG9jYXRpb25TcGFuIiwiSVBfQVBJX0JBU0UiLCJSRVFVRVNUX0xJTUlUX0hJVF9DT0RFIiwidG9nZ2xlVGltZURldGFpbHNCdG4iLCJkZXRhaWxzRGF5T2ZUaGVZZWFyIiwiUVVPVEVfQVBJX0JBU0UiLCJJUF9BUElfS0VZIiwiY29uY2F0IiwiZmV0Y2giLCJ0aGVuIiwiV09STERfVElNRV9BUElfQkFTRSIsInF1b3RlIiwiZGF0YSIsImVuIiwiYXV0aG9yIiwiaW5zZXJ0UXVvdGUiLCJfcmVmIiwiaW5uZXJUZXh0IiwiZ2V0UmFuZG9tUXVvdGUiLCJnZXRJdGVtIiwibG9jYWxEYXRhIiwiaGFuZGxlSVBEYXRhIiwiSlNPTiIsInBhcnNlIiwiRXJyb3IiLCJyZXMiLCJqc29uIiwiX2RhdGEkZGF0YSIsImlwIiwibG9jYXRpb24iLCJnZXRJUEluZm8iLCJjb3VudHJ5IiwiYWxwaGEyIiwiY2l0eSIsIm5hbWUiLCJsb2NhdGlvbkRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJfcmVmMiIsImluc2VydExvY2F0aW9uIiwiZ2V0VGltZUJ5SVAiLCJfcmVmMyIsInJlcXVlc3RVUkkiLCJoYW5kbGVUaW1lRGF0YSIsIl9vYmplY3RTcHJlYWQiLCJkYXlPZldlZWsiLCJkYXlfb2Zfd2VlayIsImRheU9mWWVhciIsImRheV9vZl95ZWFyIiwid2Vla19udW1iZXIiLCJkYXRlIiwiRGF0ZSIsImRhdGV0aW1lIiwiX3JlZjUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJpbnNlcnRHcmVldGluZyIsImhvdXJzIiwiaGFuZGxlSWNvbiIsImhhbmRsZUJhY2tncm91bmRJbWFnZSIsImZvcm1hdE1pbnV0ZXMiLCJtaW51dGVzIiwiYWJicmV2aWF0aW9uIiwidGltZXpvbmUiLCJkZXRhaWxzRGF5T2ZUaGVXZWVrIiwiZGV0YWlsc1dlZWtOdW1iZXIiLCJ3ZWVrTnVtYmVyIiwiaWNvblNvdXJjZSIsImlzRGF5IiwiSUNPTl9TVU4iLCJJQ09OX01PT04iLCJzcmMiLCJkYXRhc2V0IiwidGltZSIsInRvZ2dsZUF0dHJpYnV0ZSIsImhhc0F0dHJpYnV0ZSIsImlzRXhwYW5kZWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJoYW5kbGVEZXRhaWxzVG9nZ2xlIl0sIm1hcHBpbmdzIjoicXZCQUFBLElBQU1BLFNBQVdDLFNBQVNDLGNBQWMsWUFBdkIsRUFFWEMsZUFBaUJGLFNBQVNDLGNBQWMsa0JBQXZCLEVBQ2pCRSxVQUFZRCxlQUFlRCxjQUFjLFFBQTdCLEVBQ1pHLFlBQWNGLGVBQWVELGNBQWMsZUFBN0IsRUFDZEksZ0JBQWtCSCxlQUFlRCxjQUFjLG1DQUE3QixFQUVsQkssa0JBQW9CTixTQUFTQyxjQUFjLFlBQXZCLEVBUHBCRixTQUFXQyxTQUFTQyxjQUFjLG1CQUF2QkQsRUFDakJPLGFBQUFQLFNBQUFDLGNBQUEsV0FBQSxFQVNNTyxnQkFBa0JSLFNBQVNDLGNBQWMsZUFBdkIsRUFSbEJDLGFBQWlCRixTQUFTQyxjQUFjLFdBQXZCRCxFQUNqQkcsYUFBWUQsU0FBY0QsY0FBZCxXQUFBQyxFQUVaRyxxQkFBa0JILFNBQWVELGNBQWMsb0NBQTdCQyxFQUN4Qk8scUJBQUFULFNBQUFDLGNBQUEsZUFBQSxFQVVNUyxnQkFBa0JELHFCQUFxQlIsY0FBYyx5QkFBbkMsRUFUbEJLLG9CQUFvQk4scUJBQXVCQyxjQUFqRCw0QkFBMEJELEVBQ3BCVyxvQkFBb0JWLHFCQUFjQSxjQUF4Qyw0QkFBMEJBLEVBQ3BCTSxr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aEIsRUF3Q0F4RSxlQXRDYTRCLGdCQUFZK0MsY0FBekJjLENBc0NBLEVBRUEzRSxxQkF0Q29CYyxhQUFZZ0MsZ0JBQWhDNkIsQ0FzQ0EsRUFFQTVGLFNBdENBaUYsUUFBQUEsS0FBa0JsRCxFQUFZbUQsVUFBOUIsVUF3Q0F4RSxxQkFBcUJnRixnQkFBZ0IsZUFBZ0JFLENBQXJELEVBckNEbEYscUJBQXNCbUYsVUFBaEJqQixPQUFBQSxVQUFnQmdCLENBQXRCLEVBdUNDckYsa0JBdENVc0UsVUFBVWlCLE9BQUssVUFBekJGLENBc0NBLEVBdkNEckYsa0JBQUFzRixVQUFBQyxPQUFBLFlBQUEsQ0FBQUYsQ0FBQSxDQUlBLEVBQ0F0RixnQkFBTWtFLGlCQUFBQSxRQUFBQSxjQUFOLEVBd0NBdkQscUJBdkNtQndELGlCQUFtQixRQUFRc0IsbUJBdUM5QyxFQW5DQS9ELGVBQUEsRUF1Q0FZLFVBQVMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjbG9ja0FwcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9jay1hcHAnKTtcclxuLyogZWxlbWVudHMgZm9yIHF1b3RlIGhhbmRsaW5nICovXHJcbmNvbnN0IHF1b3RlR2VuZXJhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1b3RlLWdlbmVyYXRvcicpO1xyXG5jb25zdCBxdW90ZVRleHQgPSBxdW90ZUdlbmVyYXRvci5xdWVyeVNlbGVjdG9yKCcjcXVvdGUnKTtcclxuY29uc3QgcXVvdGVBdXRob3IgPSBxdW90ZUdlbmVyYXRvci5xdWVyeVNlbGVjdG9yKCcjcXVvdGUtYXV0aG9yJyk7XHJcbmNvbnN0IHJlZnJlc2hRdW90ZUJ0biA9IHF1b3RlR2VuZXJhdG9yLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1xdW90ZS1yZWZyZXNoXScpO1xyXG4vKiBlbGVtZW50cyBmb3IgdGltZSBhbmQgZGV0YWlscyBoYW5kbGluZyAqL1xyXG5jb25zdCB0aW1lSW5mb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lLWluZm8nKTtcclxuY29uc3QgdGltZUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGltZS1vZi1kYXktaWNvbicpO1xyXG5jb25zdCBncmVldGluZ1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ3JlZXRpbmcnKTtcclxuY29uc3QgY3VycmVudFRpbWVTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtdGltZScpO1xyXG5jb25zdCB0aW1lem9uZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGltZXpvbmUnKTtcclxuY29uc3QgbG9jYXRpb25TcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvY2F0aW9uJyk7XHJcbi8qIGRldGFpbHMgZWxlbWVudHMgKi9cclxuY29uc3QgdG9nZ2xlVGltZURldGFpbHNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249dG9nZ2xlLWRldGFpbHNdJyk7XHJcbmNvbnN0IHRpbWVEZXRhaWxzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWUtZGV0YWlscycpO1xyXG5jb25zdCBkZXRhaWxzVGltZXpvbmUgPSB0aW1lRGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXRhaWxzPXRpbWV6b25lXScpO1xyXG5jb25zdCBkZXRhaWxzRGF5T2ZUaGVZZWFyID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz1kYXktb2YteWVhcl0nKTtcclxuY29uc3QgZGV0YWlsc0RheU9mVGhlV2VlayA9IHRpbWVEZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRldGFpbHM9ZGF5LW9mLXdlZWtdJyk7XHJcbmNvbnN0IGRldGFpbHNXZWVrTnVtYmVyID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz13ZWVrLW51bWJlcl0nKTtcclxuXHJcbmNvbnN0IFFVT1RFX0FQSV9CQVNFID0gJ2h0dHBzOi8vcHJvZ3JhbW1pbmctcXVvdGVzLWFwaS5oZXJva3VhcHAuY29tL1F1b3Rlcyc7XHJcbmNvbnN0IElQX0FQSV9LRVkgPSAnaU1DOVJwZWZidlZUZ0M3dkRJZHhMWUgxNGh3QUtzOXB2aTRTRXlweCc7XHJcbmNvbnN0IElQX0FQSV9CQVNFID0gJ2h0dHBzOi8vYXBpLmlwYmFzZS5jb20vdjInO1xyXG5jb25zdCBSRVFVRVNUX0xJTUlUX0hJVF9DT0RFID0gNDI5O1xyXG5jb25zdCBXT1JMRF9USU1FX0FQSV9CQVNFID0gJ2h0dHBzOi8vd29ybGR0aW1lYXBpLm9yZy9hcGkvaXAnO1xyXG5cclxuY29uc3QgSUNPTl9TVU4gPSAnLi9kaXN0L2Fzc2V0cy9kZXNrdG9wL2ljb24tc3VuLnN2Zyc7XHJcbmNvbnN0IElDT05fTU9PTiA9ICcuL2Rpc3QvYXNzZXRzL2Rlc2t0b3AvaWNvbi1tb29uLnN2Zyc7XHJcblxyXG4vKiBxdW90ZSBoYW5kbGluZyAqL1xyXG5jb25zdCBnZXRSYW5kb21RdW90ZSA9ICgpID0+IHtcclxuXHRjb25zdCByZXF1ZXN0VVJJID0gYCR7UVVPVEVfQVBJX0JBU0V9L3JhbmRvbWA7XHJcblx0ZmV0Y2gocmVxdWVzdFVSSSlcclxuXHRcdC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcblx0XHQudGhlbigoZGF0YSkgPT4gaW5zZXJ0UXVvdGUoeyBxdW90ZTogZGF0YS5lbiwgYXV0aG9yOiBkYXRhLmF1dGhvciB9KSk7XHJcbn07XHJcblxyXG5jb25zdCBpbnNlcnRRdW90ZSA9ICh7IHF1b3RlLCBhdXRob3IgfSkgPT4ge1xyXG5cdHF1b3RlVGV4dC5pbm5lclRleHQgPSBgXCIke3F1b3RlfVwiYDtcclxuXHRxdW90ZUF1dGhvci5pbm5lclRleHQgPSBhdXRob3I7XHJcbn07XHJcblxyXG4vKiBpcCBpbmZvIGhhbmRsaW5nICovXHJcbmNvbnN0IGdldElQSW5mbyA9ICgpID0+IHtcclxuXHQvKiBjaGVjayBpZiBkYXRhIGluIGxvY2FsIHN0b3JhZ2UgdG8gcHJldmVudCBtdWx0aXBsZSByZXF1ZXN0cyAqL1xyXG5cdGNvbnN0IGxvY2FsRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbicpO1xyXG5cdGlmIChsb2NhbERhdGEpIHtcclxuXHRcdGhhbmRsZUlQRGF0YShKU09OLnBhcnNlKGxvY2FsRGF0YSkpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0LyogaWYgbm8gZGF0YSBpbiBsb2NhbCBzdG9yYWdlLCB0aGVuIGNyZWF0ZSByZXF1ZXN0ICovXHJcblx0Y29uc3QgcmVxdWVzdFVSSSA9IGAke0lQX0FQSV9CQVNFfS9pbmZvP2FwaWtleT0ke0lQX0FQSV9LRVl9YDtcclxuXHRmZXRjaChyZXF1ZXN0VVJJKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4ge1xyXG5cdFx0XHRpZiAocmVzLnN0YXR1cyA9PT0gUkVRVUVTVF9MSU1JVF9ISVRfQ09ERSkgdGhyb3cgbmV3IEVycm9yKCdSZXF1ZXN0cyBsaW1pdCBoaXQnKTtcclxuXHRcdFx0cmV0dXJuIHJlcy5qc29uKCk7XHJcblx0XHR9KVxyXG5cdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0Y29uc3QgeyBpcCwgbG9jYXRpb24gfSA9IGRhdGEuZGF0YTtcclxuXHRcdFx0Y29uc3QgbG9jYXRpb25EYXRhID0geyBpcDogaXAsIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkuYWxwaGEyLCBjaXR5OiBsb2NhdGlvbi5jaXR5Lm5hbWUgfTtcclxuXHRcdFx0aGFuZGxlSVBEYXRhKGxvY2F0aW9uRGF0YSk7XHJcblx0XHRcdHJldHVybiBsb2NhdGlvbkRhdGE7XHJcblx0XHR9KVxyXG5cdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0Lyogc2F2ZSB0byBsb2NhbCBzdG9yYWdlICovXHJcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhdGlvbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdC8vIGRvIG5vdGhpbmcgZm9yIG5vd1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVJUERhdGEgPSAoeyBpcCwgY291bnRyeSwgY2l0eSB9KSA9PiB7XHJcblx0aW5zZXJ0TG9jYXRpb24oeyBjb3VudHJ5LCBjaXR5IH0pO1xyXG5cdGdldFRpbWVCeUlQKGlwKTtcclxufTtcclxuXHJcbi8qIGluc2VydCBsb2NhdGlvbiB1bmRlciBkaXNwbGF5aW5nIHRpbWUgKi9cclxuY29uc3QgaW5zZXJ0TG9jYXRpb24gPSAoeyBjb3VudHJ5LCBjaXR5IH0pID0+IHtcclxuXHRsb2NhdGlvblNwYW4uaW5uZXJUZXh0ID0gYCR7Y2l0eX0sICR7Y291bnRyeX1gO1xyXG59O1xyXG5cclxuLyogdGltZSBoYW5kbGluZyAqL1xyXG5jb25zdCBnZXRUaW1lQnlJUCA9IChpcCkgPT4ge1xyXG5cdGNvbnN0IHJlcXVlc3RVUkkgPSBgJHtXT1JMRF9USU1FX0FQSV9CQVNFfS8ke2lwfWA7XHJcblx0ZmV0Y2gocmVxdWVzdFVSSSlcclxuXHRcdC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcblx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHRoYW5kbGVUaW1lRGF0YSh7XHJcblx0XHRcdFx0Li4uZGF0YSxcclxuXHRcdFx0XHRkYXlPZldlZWs6IGRhdGEuZGF5X29mX3dlZWssXHJcblx0XHRcdFx0ZGF5T2ZZZWFyOiBkYXRhLmRheV9vZl95ZWFyLFxyXG5cdFx0XHRcdHdlZWtOdW1iZXI6IGRhdGEud2Vla19udW1iZXIsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG4vKiBpbnNlcnQgZGF0YSBmb3IgdGltZSwgbG9jYXRpb24gYW5kIGRldGFpbHMgKi9cclxuY29uc3QgaGFuZGxlVGltZURhdGEgPSAoeyBhYmJyZXZpYXRpb24sIGRhdGV0aW1lLCBkYXlPZldlZWssIGRheU9mWWVhciwgd2Vla051bWJlciwgdGltZXpvbmUgfSkgPT4ge1xyXG5cdGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRldGltZSk7XHJcblx0Y29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IFtkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpXTtcclxuXHRpbnNlcnRHcmVldGluZyhob3Vycyk7XHJcblx0aGFuZGxlSWNvbihob3Vycyk7XHJcblx0aGFuZGxlQmFja2dyb3VuZEltYWdlKGhvdXJzKTtcclxuXHRjdXJyZW50VGltZVNwYW4uaW5uZXJUZXh0ID0gYCR7aG91cnN9OiR7Zm9ybWF0TWludXRlcyhtaW51dGVzKX1gO1xyXG5cdHRpbWV6b25lU3Bhbi5pbm5lclRleHQgPSBhYmJyZXZpYXRpb247XHJcblx0ZGV0YWlsc1RpbWV6b25lLmlubmVyVGV4dCA9IHRpbWV6b25lO1xyXG5cdGRldGFpbHNEYXlPZlRoZVllYXIuaW5uZXJUZXh0ID0gZGF5T2ZZZWFyO1xyXG5cdGRldGFpbHNEYXlPZlRoZVdlZWsuaW5uZXJUZXh0ID0gZGF5T2ZXZWVrO1xyXG5cdGRldGFpbHNXZWVrTnVtYmVyLmlubmVyVGV4dCA9IHdlZWtOdW1iZXI7XHJcbn07XHJcblxyXG5jb25zdCBmb3JtYXRNaW51dGVzID0gKG1pbnV0ZXMpID0+IHtcclxuXHRyZXR1cm4gYCR7bWludXRlcyA8IDEwID8gJzAnIDogJyd9JHttaW51dGVzfWA7XHJcbn07XHJcblxyXG4vKiBzZXQgZ3JlZXRpbmcgZGVwZW5kaW5nIG9uIHRoZSB0aW1lIG9mIHRoZSBkYXkgKi9cclxuY29uc3QgaW5zZXJ0R3JlZXRpbmcgPSAoaG91cnMpID0+IHtcclxuXHRjb25zdCB0aW1lT2ZEYXkgPSBob3VycyA+PSA1ICYmIGhvdXJzIDwgMTIgPyAnbW9ybmluZycgOiBob3VycyA+PSAxMiAmJiBob3VycyA8IDE4ID8gJ2FmdGVybm9vbicgOiAnZXZlbmluZyc7XHJcblx0Z3JlZXRpbmdTcGFuLmlubmVyVGV4dCA9IHRpbWVPZkRheTtcclxufTtcclxuXHJcbi8qIHNldCBpY29uIGRlcGVuZGluZyBvbiB0aGUgdGltZSBvZiB0aGUgZGF5ICovXHJcbmNvbnN0IGhhbmRsZUljb24gPSAoaG91cnMpID0+IHtcclxuXHRjb25zdCBpY29uU291cmNlID0gaXNEYXkoaG91cnMpID8gSUNPTl9TVU4gOiBJQ09OX01PT047XHJcblx0dGltZUljb24uc3JjID0gaWNvblNvdXJjZTtcclxufTtcclxuXHJcbi8qIHNldCBiYWNrZ3JvdW5kIGRlcGVuZGluZyBvbiB0aGUgdGltZSBvZiB0aGUgZGF5ICovXHJcbmNvbnN0IGhhbmRsZUJhY2tncm91bmRJbWFnZSA9IChob3VycykgPT4ge1xyXG5cdGNvbnN0IHRpbWUgPSBpc0RheShob3VycykgPyAnZGF5dGltZScgOiAnbmlnaHR0aW1lJztcclxuXHRkb2N1bWVudC5ib2R5LmRhdGFzZXQudGltZSA9IHRpbWU7XHJcbn07XHJcblxyXG5jb25zdCBpc0RheSA9IChob3VycykgPT4ge1xyXG5cdHJldHVybiBob3VycyA+PSA1ICYmIGhvdXJzIDwgMTg7XHJcbn07XHJcblxyXG4vKiB0b2dnbGluZyBkZXRhaWxzIGhhbmRsZXIgKi9cclxuY29uc3QgaGFuZGxlRGV0YWlsc1RvZ2dsZSA9ICgpID0+IHtcclxuXHR0b2dnbGVUaW1lRGV0YWlsc0J0bi50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQnKTtcclxuXHRjb25zdCBpc0V4cGFuZGVkID0gdG9nZ2xlVGltZURldGFpbHNCdG4uaGFzQXR0cmlidXRlKCdkYXRhLWV4cGFuZGVkJyk7XHJcblx0LyogdG9nZ2xpbmcgcXVvdGUgKi9cclxuXHRxdW90ZUdlbmVyYXRvci50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtaGlkZGVuJywgaXNFeHBhbmRlZCk7XHJcblx0Lyogc2V0dGluZyBhcmlhIGZvciB0b2dnbGUgYnRuICovXHJcblx0dG9nZ2xlVGltZURldGFpbHNCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNFeHBhbmRlZCk7XHJcblx0LyogY2hhbmdpbmcgbGF5b3V0IGZvciBsb2NrIGFwcCAqL1xyXG5cdGNsb2NrQXBwLmRhdGFzZXQubW9kZSA9IGlzRXhwYW5kZWQgPyAnZGV0YWlscycgOiAnZGlzcGxheSc7XHJcblx0LyogdG9nZ2xpbmcgZGV0YWlscyBpbmZvICovXHJcblx0dGltZURldGFpbHNDb250YWluZXIudG9nZ2xlQXR0cmlidXRlKCdkYXRhLXZpc2libGUnLCBpc0V4cGFuZGVkKTtcclxuXHR0aW1lRGV0YWlsc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdtb3ZlLXVwJywgaXNFeHBhbmRlZCk7XHJcblx0dGltZUluZm9Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnbW92ZS11cCcsIGlzRXhwYW5kZWQpO1xyXG5cdHRpbWVJbmZvQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ21vdmUtZG93bicsICFpc0V4cGFuZGVkKTtcclxufTtcclxuXHJcbi8qIGV2ZW50IGxpc3RlbmVycyAqL1xyXG5yZWZyZXNoUXVvdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRSYW5kb21RdW90ZSk7XHJcbnRvZ2dsZVRpbWVEZXRhaWxzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRGV0YWlsc1RvZ2dsZSk7XHJcblxyXG4vKiAgKi9cclxuZ2V0UmFuZG9tUXVvdGUoKTtcclxuZ2V0SVBJbmZvKCk7XHJcbiJdfQ==
