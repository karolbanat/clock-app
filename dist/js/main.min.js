"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var clockApp=document.querySelector("#clock-app"),quoteGenerator=document.querySelector("#quote-generator"),quoteText=quoteGenerator.querySelector("#quote"),quoteAuthor=quoteGenerator.querySelector("#quote-author"),refreshQuoteBtn=quoteGenerator.querySelector("button[data-action=quote-refresh]"),timeIcon=document.querySelector("#time-of-day-icon"),greetingSpan=document.querySelector("#greeting"),currentTimeSpan=document.querySelector("#current-time"),timezoneSpan=document.querySelector("#timezone"),locationSpan=document.querySelector("#location"),toggleTimeDetailsBtn=document.querySelector("button[data-action=toggle-details]"),timeDetailsContainer=document.querySelector("#time-details"),detailsTimezone=timeDetailsContainer.querySelector("[data-details=timezone]"),detailsDayOfTheYear=timeDetailsContainer.querySelector("[data-details=day-of-year]"),detailsDayOfTheWeek=timeDetailsContainer.querySelector("[data-details=day-of-week]"),detailsWeekNumber=timeDetailsContainer.querySelector("[data-details=week-number]"),QUOTE_API_BASE="https://programming-quotes-api.herokuapp.com/Quotes",IP_API_KEY="iMC9RpefbvVTgC7vDIdxLYH14hwAKs9pvi4SEypx",IP_API_BASE="https://api.ipbase.com/v2",REQUEST_LIMIT_HIT_CODE=429,WORLD_TIME_API_BASE="https://worldtimeapi.org/api/ip",ICON_SUN="./dist/assets/desktop/icon-sun.svg",ICON_MOON="./dist/assets/desktop/icon-moon.svg",getRandomQuote=function(){var e="".concat(QUOTE_API_BASE,"/random");fetch(e).then(function(e){return e.json()}).then(function(e){return insertQuote({quote:e.en,author:e.author})})},insertQuote=function(e){var t=e.quote,e=e.author;quoteText.innerText='"'.concat(t,'"'),quoteAuthor.innerText=e},getIPInfo=function(){var e=localStorage.getItem("location");e?handleIPData(JSON.parse(e)):(e="".concat(IP_API_BASE,"/info?apikey=").concat(IP_API_KEY),fetch(e).then(function(e){if(e.status===REQUEST_LIMIT_HIT_CODE)throw new Error("Requests limit hit");return e.json()}).then(function(e){var e=e.data,t=e.ip,e=e.location,t={ip:t,country:e.country.alpha2,city:e.city.name};return handleIPData(t),t}).then(function(e){localStorage.setItem("location",JSON.stringify(e))}).catch(function(e){}))},handleIPData=function(e){var t=e.ip,n=e.country,e=e.city;insertLocation({country:n,city:e}),getTimeByIP(t)},insertLocation=function(e){var t=e.country,e=e.city;locationSpan.innerText="".concat(e,", ").concat(t)},getTimeByIP=function(e){e="".concat(WORLD_TIME_API_BASE,"/").concat(e);fetch(e).then(function(e){return e.json()}).then(function(e){handleTimeData(_objectSpread(_objectSpread({},e),{},{dayOfWeek:e.day_of_week,dayOfYear:e.day_of_year,weekNumber:e.week_number}))})},handleTimeData=function(e){var t=e.abbreviation,n=e.datetime,o=e.dayOfWeek,a=e.dayOfYear,r=e.weekNumber,e=e.timezone,n=new Date(n),n=[n.getHours(),n.getMinutes()],i=n[0],n=n[1];insertGreeting(i),handleIcon(i),handleBackgroundImage(i),currentTimeSpan.innerText="".concat(i,":").concat(formatMinutes(n)),timezoneSpan.innerText=t,detailsTimezone.innerText=e,detailsDayOfTheYear.innerText=a,detailsDayOfTheWeek.innerText=o,detailsWeekNumber.innerText=r},formatMinutes=function(e){return"".concat(e<10?"0":"").concat(e)},insertGreeting=function(e){greetingSpan.innerText=5<=e&&e<12?"morning":12<=e&&e<18?"afternoon":"evening"},handleIcon=function(e){e=isDay(e)?ICON_SUN:ICON_MOON;timeIcon.src=e},handleBackgroundImage=function(e){e=isDay(e)?"daytime":"nighttime";document.body.dataset.time=e},isDay=function(e){return 5<=e&&e<18},handleDetailsToggle=function(){toggleTimeDetailsBtn.toggleAttribute("data-expanded");var e=toggleTimeDetailsBtn.hasAttribute("data-expanded");quoteGenerator.toggleAttribute("data-hidden",e),toggleTimeDetailsBtn.setAttribute("aria-expanded",e),timeDetailsContainer.toggleAttribute("data-visible",e),timeDetailsContainer.classList.add("animation-scale-up"),clockApp.dataset.mode=e?"details":"display"};refreshQuoteBtn.addEventListener("click",getRandomQuote),toggleTimeDetailsBtn.addEventListener("click",handleDetailsToggle),getRandomQuote(),getIPInfo();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2xvY2tBcHAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdW90ZUdlbmVyYXRvciIsInF1b3RlVGV4dCIsInF1b3RlQXV0aG9yIiwicmVmcmVzaFF1b3RlQnRuIiwidGltZUljb24iLCJjdXJyZW50VGltZVNwYW4iLCJ0aW1lem9uZVNwYW4iLCJkZXRhaWxzVGltZXpvbmUiLCJ0aW1lRGV0YWlsc0NvbnRhaW5lciIsImRldGFpbHNEYXlPZlRoZVllYXIiLCJncmVldGluZ1NwYW4iLCJsb2NhdGlvblNwYW4iLCJJUF9BUElfQkFTRSIsIlJFUVVFU1RfTElNSVRfSElUX0NPREUiLCJ0b2dnbGVUaW1lRGV0YWlsc0J0biIsIlFVT1RFX0FQSV9CQVNFIiwiSVBfQVBJX0tFWSIsImNvbmNhdCIsImZldGNoIiwidGhlbiIsIldPUkxEX1RJTUVfQVBJX0JBU0UiLCJxdW90ZSIsImRhdGEiLCJlbiIsImF1dGhvciIsImluc2VydFF1b3RlIiwiX3JlZiIsImlubmVyVGV4dCIsImdldFJhbmRvbVF1b3RlIiwiZ2V0SXRlbSIsImxvY2FsRGF0YSIsImhhbmRsZUlQRGF0YSIsIkpTT04iLCJwYXJzZSIsIkVycm9yIiwicmVzIiwianNvbiIsIl9kYXRhJGRhdGEiLCJpcCIsImxvY2F0aW9uIiwiZ2V0SVBJbmZvIiwiY291bnRyeSIsImFscGhhMiIsImNpdHkiLCJuYW1lIiwibG9jYXRpb25EYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImVycm9yIiwiX3JlZjIiLCJpbnNlcnRMb2NhdGlvbiIsImdldFRpbWVCeUlQIiwiX3JlZjMiLCJyZXF1ZXN0VVJJIiwiaGFuZGxlVGltZURhdGEiLCJfb2JqZWN0U3ByZWFkIiwiZGF5T2ZXZWVrIiwiZGF5X29mX3dlZWsiLCJkYXlPZlllYXIiLCJkYXlfb2ZfeWVhciIsIndlZWtfbnVtYmVyIiwiZGF0ZSIsIkRhdGUiLCJkYXRldGltZSIsIl9yZWY1IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiaW5zZXJ0R3JlZXRpbmciLCJob3VycyIsImhhbmRsZUljb24iLCJoYW5kbGVCYWNrZ3JvdW5kSW1hZ2UiLCJmb3JtYXRNaW51dGVzIiwibWludXRlcyIsImFiYnJldmlhdGlvbiIsInRpbWV6b25lIiwiZGV0YWlsc0RheU9mVGhlV2VlayIsImRldGFpbHNXZWVrTnVtYmVyIiwid2Vla051bWJlciIsImljb25Tb3VyY2UiLCJpc0RheSIsIklDT05fU1VOIiwiSUNPTl9NT09OIiwic3JjIiwiZGF0YXNldCIsInRpbWUiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGUiLCJpc0V4cGFuZGVkIiwiYWRkIiwiaGFuZGxlRGV0YWlsc1RvZ2dsZSJdLCJtYXBwaW5ncyI6InF2QkFBQSxJQUFNQSxTQUFXQyxTQUFTQyxjQUFjLFlBQXZCLEVBRVhDLGVBQWlCRixTQUFTQyxjQUFjLGtCQUF2QixFQUNqQkUsVUFBWUQsZUFBZUQsY0FBYyxRQUE3QixFQUNaRyxZQUFjRixlQUFlRCxjQUFjLGVBQTdCLEVBQ2RJLGdCQUFrQkgsZUFBZUQsY0FBYyxtQ0FBN0IsRUFFbEJLLFNBQVdOLFNBQVNDLGNBQWMsbUJBQXZCLEVBUFhGLGFBQVdDLFNBQVNDLGNBQWMsV0FBdkJELEVBQ2pCTyxnQkFBQVAsU0FBQUMsY0FBQSxlQUFBLEVBU01PLGFBQWVSLFNBQVNDLGNBQWMsV0FBdkIsRUFSZkMsYUFBaUJGLFNBQVNDLGNBQWMsV0FBdkJELEVBRWpCSSxxQkFBY0YsU0FBZUQsY0FBYyxvQ0FBN0JDLEVBQ2RHLHFCQUFrQkgsU0FBZUQsY0FBYyxlQUE3QkMsRUFDeEJPLGdCQUFBQyxxQkFBQVQsY0FBQSx5QkFBQSxFQVVNVSxvQkFBc0JELHFCQUFxQlQsY0FBYyw0QkFBbkMsRUFUdEJLLG9CQUFvQkwscUJBQWNBLGNBQXhDLDRCQUEwQkEsRUFDcEJXLGtCQUFlWixxQkFBdUJDLGNBQTVDLDRCQUFxQkQsRUFFZlEsZUFBZVIsc0RBQ2ZhLFdBQWViLDJDQUNyQmMsWUFBQSw0QkFXTUMs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RUFDQWhGLHFCQXRDZ0JtQixnQkFBaEIsZUFBQTZELENBc0NBLEVBQ0FoRixxQkF0Q29CbUIsVUFBcEI4RCxJQUFnQzlCLG9CQXNDaEMsRUFDQTlELFNBdENBK0UsUUFBQUEsS0FBb0JqRCxFQUFZOEIsVUFBaEMsU0F1Q0EsRUFuQ0R0RCxnQkFBTXFFLGlCQUFBQSxRQUFnQjVDLGNBQXRCLEVBdUNBZCxxQkF0Q1cyRCxpQkFBQSxRQUFWaUIsbUJBc0NELEVBR0E5RCxlQUFjLEVBQ2RZLFVBQVMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjbG9ja0FwcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9jay1hcHAnKTtcclxuLyogZWxlbWVudHMgZm9yIHF1b3RlIGhhbmRsaW5nICovXHJcbmNvbnN0IHF1b3RlR2VuZXJhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1b3RlLWdlbmVyYXRvcicpO1xyXG5jb25zdCBxdW90ZVRleHQgPSBxdW90ZUdlbmVyYXRvci5xdWVyeVNlbGVjdG9yKCcjcXVvdGUnKTtcclxuY29uc3QgcXVvdGVBdXRob3IgPSBxdW90ZUdlbmVyYXRvci5xdWVyeVNlbGVjdG9yKCcjcXVvdGUtYXV0aG9yJyk7XHJcbmNvbnN0IHJlZnJlc2hRdW90ZUJ0biA9IHF1b3RlR2VuZXJhdG9yLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1xdW90ZS1yZWZyZXNoXScpO1xyXG4vKiBlbGVtZW50cyBmb3IgdGltZSBhbmQgZGV0YWlscyBoYW5kbGluZyAqL1xyXG5jb25zdCB0aW1lSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lLW9mLWRheS1pY29uJyk7XHJcbmNvbnN0IGdyZWV0aW5nU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNncmVldGluZycpO1xyXG5jb25zdCBjdXJyZW50VGltZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC10aW1lJyk7XHJcbmNvbnN0IHRpbWV6b25lU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lem9uZScpO1xyXG5jb25zdCBsb2NhdGlvblNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9jYXRpb24nKTtcclxuLyogZGV0YWlscyBlbGVtZW50cyAqL1xyXG5jb25zdCB0b2dnbGVUaW1lRGV0YWlsc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj10b2dnbGUtZGV0YWlsc10nKTtcclxuY29uc3QgdGltZURldGFpbHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGltZS1kZXRhaWxzJyk7XHJcbmNvbnN0IGRldGFpbHNUaW1lem9uZSA9IHRpbWVEZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRldGFpbHM9dGltZXpvbmVdJyk7XHJcbmNvbnN0IGRldGFpbHNEYXlPZlRoZVllYXIgPSB0aW1lRGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXRhaWxzPWRheS1vZi15ZWFyXScpO1xyXG5jb25zdCBkZXRhaWxzRGF5T2ZUaGVXZWVrID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz1kYXktb2Ytd2Vla10nKTtcclxuY29uc3QgZGV0YWlsc1dlZWtOdW1iZXIgPSB0aW1lRGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXRhaWxzPXdlZWstbnVtYmVyXScpO1xyXG5cclxuY29uc3QgUVVPVEVfQVBJX0JBU0UgPSAnaHR0cHM6Ly9wcm9ncmFtbWluZy1xdW90ZXMtYXBpLmhlcm9rdWFwcC5jb20vUXVvdGVzJztcclxuY29uc3QgSVBfQVBJX0tFWSA9ICdpTUM5UnBlZmJ2VlRnQzd2RElkeExZSDE0aHdBS3M5cHZpNFNFeXB4JztcclxuY29uc3QgSVBfQVBJX0JBU0UgPSAnaHR0cHM6Ly9hcGkuaXBiYXNlLmNvbS92Mic7XHJcbmNvbnN0IFJFUVVFU1RfTElNSVRfSElUX0NPREUgPSA0Mjk7XHJcbmNvbnN0IFdPUkxEX1RJTUVfQVBJX0JBU0UgPSAnaHR0cHM6Ly93b3JsZHRpbWVhcGkub3JnL2FwaS9pcCc7XHJcblxyXG5jb25zdCBJQ09OX1NVTiA9ICcuL2Rpc3QvYXNzZXRzL2Rlc2t0b3AvaWNvbi1zdW4uc3ZnJztcclxuY29uc3QgSUNPTl9NT09OID0gJy4vZGlzdC9hc3NldHMvZGVza3RvcC9pY29uLW1vb24uc3ZnJztcclxuXHJcbi8qIHF1b3RlIGhhbmRsaW5nICovXHJcbmNvbnN0IGdldFJhbmRvbVF1b3RlID0gKCkgPT4ge1xyXG5cdGNvbnN0IHJlcXVlc3RVUkkgPSBgJHtRVU9URV9BUElfQkFTRX0vcmFuZG9tYDtcclxuXHRmZXRjaChyZXF1ZXN0VVJJKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuXHRcdC50aGVuKChkYXRhKSA9PiBpbnNlcnRRdW90ZSh7IHF1b3RlOiBkYXRhLmVuLCBhdXRob3I6IGRhdGEuYXV0aG9yIH0pKTtcclxufTtcclxuXHJcbmNvbnN0IGluc2VydFF1b3RlID0gKHsgcXVvdGUsIGF1dGhvciB9KSA9PiB7XHJcblx0cXVvdGVUZXh0LmlubmVyVGV4dCA9IGBcIiR7cXVvdGV9XCJgO1xyXG5cdHF1b3RlQXV0aG9yLmlubmVyVGV4dCA9IGF1dGhvcjtcclxufTtcclxuXHJcbi8qIGlwIGluZm8gaGFuZGxpbmcgKi9cclxuY29uc3QgZ2V0SVBJbmZvID0gKCkgPT4ge1xyXG5cdC8qIGNoZWNrIGlmIGRhdGEgaW4gbG9jYWwgc3RvcmFnZSB0byBwcmV2ZW50IG11bHRpcGxlIHJlcXVlc3RzICovXHJcblx0Y29uc3QgbG9jYWxEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uJyk7XHJcblx0aWYgKGxvY2FsRGF0YSkge1xyXG5cdFx0aGFuZGxlSVBEYXRhKEpTT04ucGFyc2UobG9jYWxEYXRhKSk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHQvKiBpZiBubyBkYXRhIGluIGxvY2FsIHN0b3JhZ2UsIHRoZW4gY3JlYXRlIHJlcXVlc3QgKi9cclxuXHRjb25zdCByZXF1ZXN0VVJJID0gYCR7SVBfQVBJX0JBU0V9L2luZm8/YXBpa2V5PSR7SVBfQVBJX0tFWX1gO1xyXG5cdGZldGNoKHJlcXVlc3RVUkkpXHJcblx0XHQudGhlbigocmVzKSA9PiB7XHJcblx0XHRcdGlmIChyZXMuc3RhdHVzID09PSBSRVFVRVNUX0xJTUlUX0hJVF9DT0RFKSB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3RzIGxpbWl0IGhpdCcpO1xyXG5cdFx0XHRyZXR1cm4gcmVzLmpzb24oKTtcclxuXHRcdH0pXHJcblx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHRjb25zdCB7IGlwLCBsb2NhdGlvbiB9ID0gZGF0YS5kYXRhO1xyXG5cdFx0XHRjb25zdCBsb2NhdGlvbkRhdGEgPSB7IGlwOiBpcCwgY291bnRyeTogbG9jYXRpb24uY291bnRyeS5hbHBoYTIsIGNpdHk6IGxvY2F0aW9uLmNpdHkubmFtZSB9O1xyXG5cdFx0XHRoYW5kbGVJUERhdGEobG9jYXRpb25EYXRhKTtcclxuXHRcdFx0cmV0dXJuIGxvY2F0aW9uRGF0YTtcclxuXHRcdH0pXHJcblx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHQvKiBzYXZlIHRvIGxvY2FsIHN0b3JhZ2UgKi9cclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvY2F0aW9uJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Ly8gZG8gbm90aGluZyBmb3Igbm93XHJcblx0XHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUlQRGF0YSA9ICh7IGlwLCBjb3VudHJ5LCBjaXR5IH0pID0+IHtcclxuXHRpbnNlcnRMb2NhdGlvbih7IGNvdW50cnksIGNpdHkgfSk7XHJcblx0Z2V0VGltZUJ5SVAoaXApO1xyXG59O1xyXG5cclxuLyogaW5zZXJ0IGxvY2F0aW9uIHVuZGVyIGRpc3BsYXlpbmcgdGltZSAqL1xyXG5jb25zdCBpbnNlcnRMb2NhdGlvbiA9ICh7IGNvdW50cnksIGNpdHkgfSkgPT4ge1xyXG5cdGxvY2F0aW9uU3Bhbi5pbm5lclRleHQgPSBgJHtjaXR5fSwgJHtjb3VudHJ5fWA7XHJcbn07XHJcblxyXG4vKiB0aW1lIGhhbmRsaW5nICovXHJcbmNvbnN0IGdldFRpbWVCeUlQID0gKGlwKSA9PiB7XHJcblx0Y29uc3QgcmVxdWVzdFVSSSA9IGAke1dPUkxEX1RJTUVfQVBJX0JBU0V9LyR7aXB9YDtcclxuXHRmZXRjaChyZXF1ZXN0VVJJKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuXHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdGhhbmRsZVRpbWVEYXRhKHtcclxuXHRcdFx0XHQuLi5kYXRhLFxyXG5cdFx0XHRcdGRheU9mV2VlazogZGF0YS5kYXlfb2Zfd2VlayxcclxuXHRcdFx0XHRkYXlPZlllYXI6IGRhdGEuZGF5X29mX3llYXIsXHJcblx0XHRcdFx0d2Vla051bWJlcjogZGF0YS53ZWVrX251bWJlcixcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxufTtcclxuXHJcbi8qIGluc2VydCBkYXRhIGZvciB0aW1lLCBsb2NhdGlvbiBhbmQgZGV0YWlscyAqL1xyXG5jb25zdCBoYW5kbGVUaW1lRGF0YSA9ICh7IGFiYnJldmlhdGlvbiwgZGF0ZXRpbWUsIGRheU9mV2VlaywgZGF5T2ZZZWFyLCB3ZWVrTnVtYmVyLCB0aW1lem9uZSB9KSA9PiB7XHJcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGV0aW1lKTtcclxuXHRjb25zdCBbaG91cnMsIG1pbnV0ZXNdID0gW2RhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCldO1xyXG5cdGluc2VydEdyZWV0aW5nKGhvdXJzKTtcclxuXHRoYW5kbGVJY29uKGhvdXJzKTtcclxuXHRoYW5kbGVCYWNrZ3JvdW5kSW1hZ2UoaG91cnMpO1xyXG5cdGN1cnJlbnRUaW1lU3Bhbi5pbm5lclRleHQgPSBgJHtob3Vyc306JHtmb3JtYXRNaW51dGVzKG1pbnV0ZXMpfWA7XHJcblx0dGltZXpvbmVTcGFuLmlubmVyVGV4dCA9IGFiYnJldmlhdGlvbjtcclxuXHRkZXRhaWxzVGltZXpvbmUuaW5uZXJUZXh0ID0gdGltZXpvbmU7XHJcblx0ZGV0YWlsc0RheU9mVGhlWWVhci5pbm5lclRleHQgPSBkYXlPZlllYXI7XHJcblx0ZGV0YWlsc0RheU9mVGhlV2Vlay5pbm5lclRleHQgPSBkYXlPZldlZWs7XHJcblx0ZGV0YWlsc1dlZWtOdW1iZXIuaW5uZXJUZXh0ID0gd2Vla051bWJlcjtcclxufTtcclxuXHJcbmNvbnN0IGZvcm1hdE1pbnV0ZXMgPSAobWludXRlcykgPT4ge1xyXG5cdHJldHVybiBgJHttaW51dGVzIDwgMTAgPyAnMCcgOiAnJ30ke21pbnV0ZXN9YDtcclxufTtcclxuXHJcbi8qIHNldCBncmVldGluZyBkZXBlbmRpbmcgb24gdGhlIHRpbWUgb2YgdGhlIGRheSAqL1xyXG5jb25zdCBpbnNlcnRHcmVldGluZyA9IChob3VycykgPT4ge1xyXG5cdGNvbnN0IHRpbWVPZkRheSA9IGhvdXJzID49IDUgJiYgaG91cnMgPCAxMiA/ICdtb3JuaW5nJyA6IGhvdXJzID49IDEyICYmIGhvdXJzIDwgMTggPyAnYWZ0ZXJub29uJyA6ICdldmVuaW5nJztcclxuXHRncmVldGluZ1NwYW4uaW5uZXJUZXh0ID0gdGltZU9mRGF5O1xyXG59O1xyXG5cclxuLyogc2V0IGljb24gZGVwZW5kaW5nIG9uIHRoZSB0aW1lIG9mIHRoZSBkYXkgKi9cclxuY29uc3QgaGFuZGxlSWNvbiA9IChob3VycykgPT4ge1xyXG5cdGNvbnN0IGljb25Tb3VyY2UgPSBpc0RheShob3VycykgPyBJQ09OX1NVTiA6IElDT05fTU9PTjtcclxuXHR0aW1lSWNvbi5zcmMgPSBpY29uU291cmNlO1xyXG59O1xyXG5cclxuLyogc2V0IGJhY2tncm91bmQgZGVwZW5kaW5nIG9uIHRoZSB0aW1lIG9mIHRoZSBkYXkgKi9cclxuY29uc3QgaGFuZGxlQmFja2dyb3VuZEltYWdlID0gKGhvdXJzKSA9PiB7XHJcblx0Y29uc3QgdGltZSA9IGlzRGF5KGhvdXJzKSA/ICdkYXl0aW1lJyA6ICduaWdodHRpbWUnO1xyXG5cdGRvY3VtZW50LmJvZHkuZGF0YXNldC50aW1lID0gdGltZTtcclxufTtcclxuXHJcbmNvbnN0IGlzRGF5ID0gKGhvdXJzKSA9PiB7XHJcblx0cmV0dXJuIGhvdXJzID49IDUgJiYgaG91cnMgPCAxODtcclxufTtcclxuXHJcbi8qIHRvZ2dsaW5nIGRldGFpbHMgaGFuZGxlciAqL1xyXG5jb25zdCBoYW5kbGVEZXRhaWxzVG9nZ2xlID0gKCkgPT4ge1xyXG5cdHRvZ2dsZVRpbWVEZXRhaWxzQnRuLnRvZ2dsZUF0dHJpYnV0ZSgnZGF0YS1leHBhbmRlZCcpO1xyXG5cdGNvbnN0IGlzRXhwYW5kZWQgPSB0b2dnbGVUaW1lRGV0YWlsc0J0bi5oYXNBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQnKTtcclxuXHRxdW90ZUdlbmVyYXRvci50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtaGlkZGVuJywgaXNFeHBhbmRlZCk7XHJcblx0dG9nZ2xlVGltZURldGFpbHNCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNFeHBhbmRlZCk7XHJcblx0dGltZURldGFpbHNDb250YWluZXIudG9nZ2xlQXR0cmlidXRlKCdkYXRhLXZpc2libGUnLCBpc0V4cGFuZGVkKTtcclxuXHR0aW1lRGV0YWlsc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb24tc2NhbGUtdXAnKTtcclxuXHRjbG9ja0FwcC5kYXRhc2V0Lm1vZGUgPSBpc0V4cGFuZGVkID8gJ2RldGFpbHMnIDogJ2Rpc3BsYXknO1xyXG59O1xyXG5cclxuLyogZXZlbnQgbGlzdGVuZXJzICovXHJcbnJlZnJlc2hRdW90ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdldFJhbmRvbVF1b3RlKTtcclxudG9nZ2xlVGltZURldGFpbHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVEZXRhaWxzVG9nZ2xlKTtcclxuXHJcbi8qICAqL1xyXG5nZXRSYW5kb21RdW90ZSgpO1xyXG5nZXRJUEluZm8oKTtcclxuIl19
