"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var clockApp=document.querySelector("#clock-app"),quoteGenerator=document.querySelector("#quote-generator"),quoteText=quoteGenerator.querySelector("#quote"),quoteAuthor=quoteGenerator.querySelector("#quote-author"),refreshQuoteBtn=quoteGenerator.querySelector("button[data-action=quote-refresh]"),timeIcon=document.querySelector("#time-of-day-icon"),greetingSpan=document.querySelector("#greeting"),currentTimeSpan=document.querySelector("#current-time"),timezoneSpan=document.querySelector("#timezone"),locationSpan=document.querySelector("#location"),toggleTimeDetailsBtn=document.querySelector("button[data-action=toggle-details]"),timeDetailsContainer=document.querySelector("#time-details"),detailsTimezone=timeDetailsContainer.querySelector("[data-details=timezone]"),detailsDayOfTheYear=timeDetailsContainer.querySelector("[data-details=day-of-year]"),detailsDayOfTheWeek=timeDetailsContainer.querySelector("[data-details=day-of-week]"),detailsWeekNumber=timeDetailsContainer.querySelector("[data-details=week-number]"),QUOTE_API_BASE="https://programming-quotes-api.herokuapp.com/Quotes",IP_API_KEY="iMC9RpefbvVTgC7vDIdxLYH14hwAKs9pvi4SEypx",IP_API_BASE="https://api.ipbase.com/v2",REQUEST_LIMIT_HIT_CODE=429,WORLD_TIME_API_BASE="https://worldtimeapi.org/api/ip",ICON_SUN="./dist/assets/desktop/icon-sun.svg",ICON_MOON="./dist/assets/desktop/icon-moon.svg",getRandomQuote=function(){var e="".concat(QUOTE_API_BASE,"/random");fetch(e).then(function(e){return e.json()}).then(function(e){return insertQuote({quote:e.en,author:e.author})})},insertQuote=function(e){var t=e.quote,e=e.author;quoteText.innerText='"'.concat(t,'"'),quoteAuthor.innerText=e},getIPInfo=function(){var e="".concat(IP_API_BASE,"/info?apikey=").concat(IP_API_KEY);fetch(e).then(function(e){if(e.status===REQUEST_LIMIT_HIT_CODE)throw new Error("Requests limit hit");return e.json()}).then(function(e){var e=e.data,t=e.ip,e=e.location;handleIPData({ip:t,country:e.country.alpha2,city:e.city.name})}).catch(function(e){})},handleIPData=function(e){var t=e.ip,n=e.country,e=e.city;insertLocation({country:n,city:e}),getTimeByIP(t)},insertLocation=function(e){var t=e.country,e=e.city;locationSpan.innerText="".concat(e,", ").concat(t)},getTimeByIP=function(e){e="".concat(WORLD_TIME_API_BASE,"/").concat(e);fetch(e).then(function(e){return e.json()}).then(function(e){handleTimeData(_objectSpread(_objectSpread({},e),{},{dayOfWeek:e.day_of_week,dayOfYear:e.day_of_year,weekNumber:e.week_number}))})},handleTimeData=function(e){var t=e.abbreviation,n=e.datetime,o=e.dayOfWeek,a=e.dayOfYear,r=e.weekNumber,e=e.timezone,n=new Date(n),n=[n.getHours(),n.getMinutes()],i=n[0],n=n[1];insertGreeting(i),handleIcon(i),handleBackgroundImage(i),currentTimeSpan.innerText="".concat(i,":").concat(n),timezoneSpan.innerText=t,detailsTimezone.innerText=e,detailsDayOfTheYear.innerText=a,detailsDayOfTheWeek.innerText=o,detailsWeekNumber.innerText=r},insertGreeting=function(e){greetingSpan.innerText=5<=e&&e<12?"morning":12<=e&&e<18?"afternoon":"evening"},handleIcon=function(e){e=isDay(e)?ICON_SUN:ICON_MOON;timeIcon.src=e},handleBackgroundImage=function(e){var t=isDay()?"daytime":"nighttime";document.body.dataset.time=t},isDay=function(e){return 5<=e&&e<18},handleDetailsToggle=function(){toggleTimeDetailsBtn.toggleAttribute("data-expanded");var e=toggleTimeDetailsBtn.hasAttribute("data-expanded");quoteGenerator.toggleAttribute("data-hidden",e),toggleTimeDetailsBtn.setAttribute("aria-expanded",e),timeDetailsContainer.toggleAttribute("data-visible",e),timeDetailsContainer.classList.add("animation-scale-up"),clockApp.dataset.mode=e?"details":"display"};refreshQuoteBtn.addEventListener("click",getRandomQuote),toggleTimeDetailsBtn.addEventListener("click",handleDetailsToggle),getRandomQuote(),getIPInfo();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2xvY2tBcHAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdW90ZUdlbmVyYXRvciIsInF1b3RlVGV4dCIsInF1b3RlQXV0aG9yIiwicmVmcmVzaFF1b3RlQnRuIiwidGltZUljb24iLCJjdXJyZW50VGltZVNwYW4iLCJ0aW1lem9uZVNwYW4iLCJkZXRhaWxzVGltZXpvbmUiLCJ0aW1lRGV0YWlsc0NvbnRhaW5lciIsImRldGFpbHNEYXlPZlRoZVllYXIiLCJncmVldGluZ1NwYW4iLCJsb2NhdGlvblNwYW4iLCJJUF9BUElfQkFTRSIsIlJFUVVFU1RfTElNSVRfSElUX0NPREUiLCJ0b2dnbGVUaW1lRGV0YWlsc0J0biIsIlFVT1RFX0FQSV9CQVNFIiwiSVBfQVBJX0tFWSIsImNvbmNhdCIsImZldGNoIiwidGhlbiIsIldPUkxEX1RJTUVfQVBJX0JBU0UiLCJxdW90ZSIsImRhdGEiLCJlbiIsImF1dGhvciIsImluc2VydFF1b3RlIiwiX3JlZiIsImlubmVyVGV4dCIsImdldFJhbmRvbVF1b3RlIiwicmVxdWVzdFVSSSIsInJlcyIsInN0YXR1cyIsIkVycm9yIiwianNvbiIsIl9kYXRhJGRhdGEiLCJsb2NhdGlvbiIsImhhbmRsZUlQRGF0YSIsImlwIiwiY291bnRyeSIsImFscGhhMiIsImNpdHkiLCJuYW1lIiwiX3JlZjIiLCJpbnNlcnRMb2NhdGlvbiIsImdldElQSW5mbyIsImdldFRpbWVCeUlQIiwiX3JlZjMiLCJoYW5kbGVUaW1lRGF0YSIsIl9vYmplY3RTcHJlYWQiLCJkYXlPZldlZWsiLCJkYXlfb2Zfd2VlayIsImRheV9vZl95ZWFyIiwid2Vla051bWJlciIsIndlZWtfbnVtYmVyIiwiX3JlZjQiLCJhYmJyZXZpYXRpb24iLCJkYXRldGltZSIsImRheU9mWWVhciIsInRpbWV6b25lIiwiRGF0ZSIsIl9yZWY1IiwiZGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwibWludXRlcyIsImluc2VydEdyZWV0aW5nIiwiaGFuZGxlSWNvbiIsImhhbmRsZUJhY2tncm91bmRJbWFnZSIsImRldGFpbHNEYXlPZlRoZVdlZWsiLCJkZXRhaWxzV2Vla051bWJlciIsInNyYyIsImljb25Tb3VyY2UiLCJ0aW1lIiwiaXNEYXkiLCJoYW5kbGVEZXRhaWxzVG9nZ2xlIiwidG9nZ2xlQXR0cmlidXRlIiwiaGFzQXR0cmlidXRlIiwiaXNFeHBhbmRlZCIsInNldEF0dHJpYnV0ZSIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJxdkJBQUEsSUFBTUEsU0FBV0MsU0FBU0MsY0FBYyxZQUF2QixFQUVYQyxlQUFpQkYsU0FBU0MsY0FBYyxrQkFBdkIsRUFDakJFLFVBQVlELGVBQWVELGNBQWMsUUFBN0IsRUFDWkcsWUFBY0YsZUFBZUQsY0FBYyxlQUE3QixFQUNkSSxnQkFBa0JILGVBQWVELGNBQWMsbUNBQTdCLEVBRWxCSyxTQUFXTixTQUFTQyxjQUFjLG1CQUF2QixFQVBYRixhQUFXQyxTQUFTQyxjQUFjLFdBQXZCRCxFQUNqQk8sZ0JBQUFQLFNBQUFDLGNBQUEsZUFBQSxFQVNNTyxhQUFlUixTQUFTQyxjQUFjLFdBQXZCLEVBUmZDLGFBQWlCRixTQUFTQyxjQUFjLFdBQXZCRCxFQUVqQkkscUJBQWNGLFNBQWVELGNBQWMsb0NBQTdCQyxFQUNkRyxxQkFBa0JILFNBQWVELGNBQWMsZUFBN0JDLEVBQ3hCTyxnQkFBQUMscUJBQUFULGNBQUEseUJBQUEsRUFVTVUsb0JBQXNCRCxxQkFBcUJULGNBQWMsNEJBQW5DLEVBVHRCSyxvQkFBb0JMLHFCQUFjQSxjQUF4Qyw0QkFBMEJBLEVBQ3BCVyxrQkFBZVoscUJBQXVCQyxjQUE1Qyw0QkFBcUJELEVBRWZRLGVBQWVSLHNEQUNmYSxXQUFlYiwyQ0FDckJjLFlBQUEsNEJBV01DLHVCQUF5QixJQVZ6QkMsb0JBQXVCaEIsa0NBRXZCUyxTQUFBQSxxQ0FDQUUsVUFBQUEsc0NBSUFNLGVBQWlCLFdBQ3ZCLElBQU1DLEVBQWEsR0FBQUMsT0FBQUYsZUFB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ZUFBVSxTQUFBbUMsR0ErQmhCdEQsYUE3Qm1CaUIsVUFBWixHQURQcUMsR0FDT0EsRUFBQSxHQUFBLFVBQUEsSUFBQUEsR0FBQUEsRUFBQSxHQUFBLFlBQUEsU0E4QlAsRUF6QkdQLFdBQVduQyxTQUFBQSxHQUNYOEIsRUFBWTlCLE1BQUsrQixDQUFBQSxFQUFBQSxTQUFBQSxVQTZCcEJqRCxTQWpDRW1FLElBQUFDLENBa0NGLEVBR0tKLHNCQUF3QixTQUFDSixHQUM5QixJQUFNUyxFQUFPQyxNQUFLLEVBQUssVUFBWSxZQTVCcEM1RSxTQUFNaUQsS0FBQUEsUUFBaUIwQixLQUFqQjFCLENBOEJMLEVBOUJpREUsTUFBQUEsU0FBaURlLEdBaUNsRyxPQWpDa0csR0FBdENQLEdBQXNDTyxFQUF0Q1AsRUFrQzVELEVBaENBa0Isb0JBQTBCLFdBb0MxQjdELHFCQXBDQThELGdCQUFBLGVBb0NBLEVBQ0EsSUFyQ2NYLEVBQWRuRCxxQkFBQStELGFBQUEsZUFBQSxFQXNDQTdFLGVBckNjNEUsZ0JBQWQsY0FBQUUsQ0FxQ0EsRUFDQWhFLHFCQXJDQWlFLGFBQUEsZ0JBQUFELENBcUNBLEVBQ0F0RSxxQkFyQ0E0RCxnQkFBQSxlQUFBVSxDQXFDQSxFQUNBdEUscUJBckNnQm1CLFVBQWhCcUQsSUFBQSxvQkFxQ0EsRUFDQW5GLFNBckNBUyxRQUFhcUIsS0FBYm1ELEVBQXlCdkIsVUFBekIsU0FzQ0EsRUFHRHBELGdCQXJDQ21FLGlCQUE4QmxCLFFBQTlCeEIsY0FxQ0QsRUFwQ0NkLHFCQVpEbUUsaUJBQUEsUUFBQU4sbUJBWUMsRUF3Q0QvQyxlQUFjLEVBckNkZ0IsVUFBTXNCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2xvY2tBcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvY2stYXBwJyk7XHJcbi8qIGVsZW1lbnRzIGZvciBxdW90ZSBoYW5kbGluZyAqL1xyXG5jb25zdCBxdW90ZUdlbmVyYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdW90ZS1nZW5lcmF0b3InKTtcclxuY29uc3QgcXVvdGVUZXh0ID0gcXVvdGVHZW5lcmF0b3IucXVlcnlTZWxlY3RvcignI3F1b3RlJyk7XHJcbmNvbnN0IHF1b3RlQXV0aG9yID0gcXVvdGVHZW5lcmF0b3IucXVlcnlTZWxlY3RvcignI3F1b3RlLWF1dGhvcicpO1xyXG5jb25zdCByZWZyZXNoUXVvdGVCdG4gPSBxdW90ZUdlbmVyYXRvci5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249cXVvdGUtcmVmcmVzaF0nKTtcclxuLyogZWxlbWVudHMgZm9yIHRpbWUgYW5kIGRldGFpbHMgaGFuZGxpbmcgKi9cclxuY29uc3QgdGltZUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGltZS1vZi1kYXktaWNvbicpO1xyXG5jb25zdCBncmVldGluZ1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ3JlZXRpbmcnKTtcclxuY29uc3QgY3VycmVudFRpbWVTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtdGltZScpO1xyXG5jb25zdCB0aW1lem9uZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGltZXpvbmUnKTtcclxuY29uc3QgbG9jYXRpb25TcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvY2F0aW9uJyk7XHJcbi8qIGRldGFpbHMgZWxlbWVudHMgKi9cclxuY29uc3QgdG9nZ2xlVGltZURldGFpbHNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249dG9nZ2xlLWRldGFpbHNdJyk7XHJcbmNvbnN0IHRpbWVEZXRhaWxzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWUtZGV0YWlscycpO1xyXG5jb25zdCBkZXRhaWxzVGltZXpvbmUgPSB0aW1lRGV0YWlsc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kZXRhaWxzPXRpbWV6b25lXScpO1xyXG5jb25zdCBkZXRhaWxzRGF5T2ZUaGVZZWFyID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz1kYXktb2YteWVhcl0nKTtcclxuY29uc3QgZGV0YWlsc0RheU9mVGhlV2VlayA9IHRpbWVEZXRhaWxzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWRldGFpbHM9ZGF5LW9mLXdlZWtdJyk7XHJcbmNvbnN0IGRldGFpbHNXZWVrTnVtYmVyID0gdGltZURldGFpbHNDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZGV0YWlscz13ZWVrLW51bWJlcl0nKTtcclxuXHJcbmNvbnN0IFFVT1RFX0FQSV9CQVNFID0gJ2h0dHBzOi8vcHJvZ3JhbW1pbmctcXVvdGVzLWFwaS5oZXJva3VhcHAuY29tL1F1b3Rlcyc7XHJcbmNvbnN0IElQX0FQSV9LRVkgPSAnaU1DOVJwZWZidlZUZ0M3dkRJZHhMWUgxNGh3QUtzOXB2aTRTRXlweCc7XHJcbmNvbnN0IElQX0FQSV9CQVNFID0gJ2h0dHBzOi8vYXBpLmlwYmFzZS5jb20vdjInO1xyXG5jb25zdCBSRVFVRVNUX0xJTUlUX0hJVF9DT0RFID0gNDI5O1xyXG5jb25zdCBXT1JMRF9USU1FX0FQSV9CQVNFID0gJ2h0dHBzOi8vd29ybGR0aW1lYXBpLm9yZy9hcGkvaXAnO1xyXG5cclxuY29uc3QgSUNPTl9TVU4gPSAnLi9kaXN0L2Fzc2V0cy9kZXNrdG9wL2ljb24tc3VuLnN2Zyc7XHJcbmNvbnN0IElDT05fTU9PTiA9ICcuL2Rpc3QvYXNzZXRzL2Rlc2t0b3AvaWNvbi1tb29uLnN2Zyc7XHJcblxyXG4vKiBxdW90ZSBoYW5kbGluZyAqL1xyXG5jb25zdCBnZXRSYW5kb21RdW90ZSA9ICgpID0+IHtcclxuXHRjb25zdCByZXF1ZXN0VVJJID0gYCR7UVVPVEVfQVBJX0JBU0V9L3JhbmRvbWA7XHJcblx0ZmV0Y2gocmVxdWVzdFVSSSlcclxuXHRcdC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcblx0XHQudGhlbigoZGF0YSkgPT4gaW5zZXJ0UXVvdGUoeyBxdW90ZTogZGF0YS5lbiwgYXV0aG9yOiBkYXRhLmF1dGhvciB9KSk7XHJcbn07XHJcblxyXG5jb25zdCBpbnNlcnRRdW90ZSA9ICh7IHF1b3RlLCBhdXRob3IgfSkgPT4ge1xyXG5cdHF1b3RlVGV4dC5pbm5lclRleHQgPSBgXCIke3F1b3RlfVwiYDtcclxuXHRxdW90ZUF1dGhvci5pbm5lclRleHQgPSBhdXRob3I7XHJcbn07XHJcblxyXG4vKiBpcCBpbmZvIGhhbmRsaW5nICovXHJcbmNvbnN0IGdldElQSW5mbyA9ICgpID0+IHtcclxuXHRjb25zdCByZXF1ZXN0VVJJID0gYCR7SVBfQVBJX0JBU0V9L2luZm8/YXBpa2V5PSR7SVBfQVBJX0tFWX1gO1xyXG5cdGZldGNoKHJlcXVlc3RVUkkpXHJcblx0XHQudGhlbigocmVzKSA9PiB7XHJcblx0XHRcdGlmIChyZXMuc3RhdHVzID09PSBSRVFVRVNUX0xJTUlUX0hJVF9DT0RFKSB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3RzIGxpbWl0IGhpdCcpO1xyXG5cdFx0XHRyZXR1cm4gcmVzLmpzb24oKTtcclxuXHRcdH0pXHJcblx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHRjb25zdCB7IGlwLCBsb2NhdGlvbiB9ID0gZGF0YS5kYXRhO1xyXG5cdFx0XHRoYW5kbGVJUERhdGEoeyBpcDogaXAsIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkuYWxwaGEyLCBjaXR5OiBsb2NhdGlvbi5jaXR5Lm5hbWUgfSk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHQvLyBkbyBub3RoaW5nIGZvciBub3dcclxuXHRcdH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlSVBEYXRhID0gKHsgaXAsIGNvdW50cnksIGNpdHkgfSkgPT4ge1xyXG5cdGluc2VydExvY2F0aW9uKHsgY291bnRyeSwgY2l0eSB9KTtcclxuXHRnZXRUaW1lQnlJUChpcCk7XHJcbn07XHJcblxyXG4vKiBpbnNlcnQgbG9jYXRpb24gdW5kZXIgZGlzcGxheWluZyB0aW1lICovXHJcbmNvbnN0IGluc2VydExvY2F0aW9uID0gKHsgY291bnRyeSwgY2l0eSB9KSA9PiB7XHJcblx0bG9jYXRpb25TcGFuLmlubmVyVGV4dCA9IGAke2NpdHl9LCAke2NvdW50cnl9YDtcclxufTtcclxuXHJcbi8qIHRpbWUgaGFuZGxpbmcgKi9cclxuY29uc3QgZ2V0VGltZUJ5SVAgPSAoaXApID0+IHtcclxuXHRjb25zdCByZXF1ZXN0VVJJID0gYCR7V09STERfVElNRV9BUElfQkFTRX0vJHtpcH1gO1xyXG5cdGZldGNoKHJlcXVlc3RVUkkpXHJcblx0XHQudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG5cdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0aGFuZGxlVGltZURhdGEoe1xyXG5cdFx0XHRcdC4uLmRhdGEsXHJcblx0XHRcdFx0ZGF5T2ZXZWVrOiBkYXRhLmRheV9vZl93ZWVrLFxyXG5cdFx0XHRcdGRheU9mWWVhcjogZGF0YS5kYXlfb2ZfeWVhcixcclxuXHRcdFx0XHR3ZWVrTnVtYmVyOiBkYXRhLndlZWtfbnVtYmVyLFxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG59O1xyXG5cclxuLyogaW5zZXJ0IGRhdGEgZm9yIHRpbWUsIGxvY2F0aW9uIGFuZCBkZXRhaWxzICovXHJcbmNvbnN0IGhhbmRsZVRpbWVEYXRhID0gKHsgYWJicmV2aWF0aW9uLCBkYXRldGltZSwgZGF5T2ZXZWVrLCBkYXlPZlllYXIsIHdlZWtOdW1iZXIsIHRpbWV6b25lIH0pID0+IHtcclxuXHRjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZXRpbWUpO1xyXG5cdGNvbnN0IFtob3VycywgbWludXRlc10gPSBbZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKV07XHJcblx0aW5zZXJ0R3JlZXRpbmcoaG91cnMpO1xyXG5cdGhhbmRsZUljb24oaG91cnMpO1xyXG5cdGhhbmRsZUJhY2tncm91bmRJbWFnZShob3Vycyk7XHJcblx0Y3VycmVudFRpbWVTcGFuLmlubmVyVGV4dCA9IGAke2hvdXJzfToke21pbnV0ZXN9YDtcclxuXHR0aW1lem9uZVNwYW4uaW5uZXJUZXh0ID0gYWJicmV2aWF0aW9uO1xyXG5cdGRldGFpbHNUaW1lem9uZS5pbm5lclRleHQgPSB0aW1lem9uZTtcclxuXHRkZXRhaWxzRGF5T2ZUaGVZZWFyLmlubmVyVGV4dCA9IGRheU9mWWVhcjtcclxuXHRkZXRhaWxzRGF5T2ZUaGVXZWVrLmlubmVyVGV4dCA9IGRheU9mV2VlaztcclxuXHRkZXRhaWxzV2Vla051bWJlci5pbm5lclRleHQgPSB3ZWVrTnVtYmVyO1xyXG59O1xyXG5cclxuLyogc2V0IGdyZWV0aW5nIGRlcGVuZGluZyBvbiB0aGUgdGltZSBvZiB0aGUgZGF5ICovXHJcbmNvbnN0IGluc2VydEdyZWV0aW5nID0gKGhvdXJzKSA9PiB7XHJcblx0Y29uc3QgdGltZU9mRGF5ID0gaG91cnMgPj0gNSAmJiBob3VycyA8IDEyID8gJ21vcm5pbmcnIDogaG91cnMgPj0gMTIgJiYgaG91cnMgPCAxOCA/ICdhZnRlcm5vb24nIDogJ2V2ZW5pbmcnO1xyXG5cdGdyZWV0aW5nU3Bhbi5pbm5lclRleHQgPSB0aW1lT2ZEYXk7XHJcbn07XHJcblxyXG4vKiBzZXQgaWNvbiBkZXBlbmRpbmcgb24gdGhlIHRpbWUgb2YgdGhlIGRheSAqL1xyXG5jb25zdCBoYW5kbGVJY29uID0gKGhvdXJzKSA9PiB7XHJcblx0Y29uc3QgaWNvblNvdXJjZSA9IGlzRGF5KGhvdXJzKSA/IElDT05fU1VOIDogSUNPTl9NT09OO1xyXG5cdHRpbWVJY29uLnNyYyA9IGljb25Tb3VyY2U7XHJcbn07XHJcblxyXG4vKiBzZXQgYmFja2dyb3VuZCBkZXBlbmRpbmcgb24gdGhlIHRpbWUgb2YgdGhlIGRheSAqL1xyXG5jb25zdCBoYW5kbGVCYWNrZ3JvdW5kSW1hZ2UgPSAoaG91cnMpID0+IHtcclxuXHRjb25zdCB0aW1lID0gaXNEYXkoKSA/ICdkYXl0aW1lJyA6ICduaWdodHRpbWUnO1xyXG5cdGRvY3VtZW50LmJvZHkuZGF0YXNldC50aW1lID0gdGltZTtcclxufTtcclxuXHJcbmNvbnN0IGlzRGF5ID0gKGhvdXJzKSA9PiB7XHJcblx0cmV0dXJuIGhvdXJzID49IDUgJiYgaG91cnMgPCAxODtcclxufTtcclxuXHJcbi8qIHRvZ2dsaW5nIGRldGFpbHMgaGFuZGxlciAqL1xyXG5jb25zdCBoYW5kbGVEZXRhaWxzVG9nZ2xlID0gKCkgPT4ge1xyXG5cdHRvZ2dsZVRpbWVEZXRhaWxzQnRuLnRvZ2dsZUF0dHJpYnV0ZSgnZGF0YS1leHBhbmRlZCcpO1xyXG5cdGNvbnN0IGlzRXhwYW5kZWQgPSB0b2dnbGVUaW1lRGV0YWlsc0J0bi5oYXNBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQnKTtcclxuXHRxdW90ZUdlbmVyYXRvci50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtaGlkZGVuJywgaXNFeHBhbmRlZCk7XHJcblx0dG9nZ2xlVGltZURldGFpbHNCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNFeHBhbmRlZCk7XHJcblx0dGltZURldGFpbHNDb250YWluZXIudG9nZ2xlQXR0cmlidXRlKCdkYXRhLXZpc2libGUnLCBpc0V4cGFuZGVkKTtcclxuXHR0aW1lRGV0YWlsc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb24tc2NhbGUtdXAnKTtcclxuXHRjbG9ja0FwcC5kYXRhc2V0Lm1vZGUgPSBpc0V4cGFuZGVkID8gJ2RldGFpbHMnIDogJ2Rpc3BsYXknO1xyXG59O1xyXG5cclxuLyogZXZlbnQgbGlzdGVuZXJzICovXHJcbnJlZnJlc2hRdW90ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdldFJhbmRvbVF1b3RlKTtcclxudG9nZ2xlVGltZURldGFpbHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVEZXRhaWxzVG9nZ2xlKTtcclxuXHJcbi8qICAqL1xyXG5nZXRSYW5kb21RdW90ZSgpO1xyXG5nZXRJUEluZm8oKTtcclxuIl19
